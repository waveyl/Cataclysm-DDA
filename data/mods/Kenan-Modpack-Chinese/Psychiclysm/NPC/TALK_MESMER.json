[
  {
    "id": [
      "TALK_SHELTER",
      "TALK_FRIEND",
      "TALK_FRIEND_GUARD",
      "TALK_STRANGER_AGGRESSIVE",
      "TALK_STRANGER_NEUTRAL",
      "TALK_STRANGER_FRIENDLY",
      "TALK_STRANGER_SCARED",
      "TALK_STRANGER_WARY",
      "TALK_MISSION_DESCRIBE_URGENT"
    ],
    "type": "talk_topic",
    "responses": [
      {
        "text": "[NPC，奴役]臣服！",
        "condition": {
          "and": [
            {
              "not": "is_by_radio"
            },
            {
              "u_has_trait": "MESMER"
            },
            {
              "not": {
                "u_has_trait": "block_psychic"
              }
            },
            {
              "npc_has_trait": "THRALL"
            },
            {
              "not": {
                "npc_has_trait": "UNTHRALL"
              }
            },
            {
              "not": {
                "npc_has_effect": "hypno_suggest"
              }
            },
            {
              "not": {
                "npc_has_effect": "block_mesmer"
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "MYCCUS",
                  "WILLPOWER",
                  "AWAKENED",
                  "MARLOSS",
                  "THRESH_ALPHA",
                  "THRESH_SLIME",
                  "THRESH_CEPHALOPOD"
                ]
              }
            }
          ]
        },
        "topic": "TALK_MESMER_THRALL"
      },
      {
        "text": "[催眠]看着我的眼睛，朋友。",
        "condition": {
          "and": [
            {
              "not": "is_by_radio"
            },
            {
              "u_has_trait": "MESMER"
            },
            {
              "not": {
                "u_has_trait": "block_psychic"
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "THRALL"
                ]
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "WILLPOWER",
                  "AWAKENED"
                ]
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "MYCCUS",
                  "MARLOSS",
                  "THRESH_ALPHA",
                  "THRESH_SLIME",
                  "THRESH_CEPHALOPOD"
                ]
              }
            },
            {
              "not": {
                "npc_has_effect": "hypno_suggest"
              }
            },
            {
              "not": {
                "npc_has_effect": "block_mesmer"
              }
            }
          ]
        },
        "topic": "TALK_MESMER_TRIALS"
      },
      {
        "text": "[催眠]看着我的眼睛，朋友。",
        "condition": {
          "and": [
            {
              "not": "is_by_radio"
            },
            {
              "u_has_trait": "MESMER"
            },
            {
              "not": {
                "u_has_trait": "block_psychic"
              }
            },
            {
              "not": "npc_friend"
            },
            {
              "npc_has_any_trait": [
                "MESMER",
                "AWAKENED"
              ]
            },
            {
              "not": {
                "npc_has_effect": "psychic_duelist"
              }
            },
            {
              "not": {
                "npc_has_var": "psychic_duelist",
                "type": "general",
                "context": "mesmer",
                "value": "yes"
              }
            }
          ]
        },
        "topic": "TALK_MESMER_START_DUEL"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_TRIALS",
    "dynamic_line": "我觉得…困了…突然之间。",
    "responses": [
      {
        "text": "你刚才说了什么？",
        "topic": "TALK_NONE"
      },
      {
        "text": "[vs 感知+智力]你的思想太脆弱了，无法抵抗我。",
        "switch": true,
        "topic": "TALK_MESMER_SUCESSS",
        "condition": {
          "and": [
            {
              "not": {
                "npc_has_intelligence": 7
              }
            },
            {
              "not": {
                "npc_has_perception": 7
              }
            },
            {
              "u_has_intelligence": 8
            },
            {
              "u_has_perception": 8
            }
          ]
        }
      },
      {
        "text": "[vs 特性]你的思想是脆弱和不平衡的。",
        "topic": "TALK_MESMER_SUCESSS",
        "switch": true,
        "condition": {
          "and": [
            {
              "and": [
                {
                  "npc_has_any_trait": [
                    "CHEMIMBALANCE",
                    "UNOBSERVANT",
                    "SLOWLEARNER",
                    "INSOMNIA",
                    "FORGETFUL",
                    "NARCOLEPTIC",
                    "TRUTHTELLER"
                  ]
                },
                {
                  "npc_has_any_trait": [
                    "PYROMANIA",
                    "PSYCHOPATH",
                    "KILLER",
                    "MASOCHIST",
                    "BADTEMPER",
                    "ADDICTIVE",
                    "SCHIZOPHRENIC",
                    "HOARDER",
                    "MOODSWINGS"
                  ]
                }
              ]
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "FEARLESS",
                  "FASTLEARNER",
                  "GOODMEMORY",
                  "SPIRITUAL",
                  "OPTIMISTIC",
                  "NONADDICTIVE",
                  "SELFAWARE",
                  "SAVANT"
                ]
              }
            }
          ]
        }
      },
      {
        "text": "是的。困了。很困…",
        "switch": true,
        "condition": "npc_friend",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 40,
          "mod": [
            [
              "AGGRESSION",
              -2
            ],
            [
              "TRUST",
              2
            ]
          ]
        },
        "success": {
          "topic": "TALK_MESMER_SUCCESS"
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL"
        }
      },
      {
        "text": "你的眼睛累了。你的思想笼罩在浓雾中。",
        "switch": true,
        "default": true,
        "condition": {
          "not": "npc_friend"
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 20,
          "mod": [
            [
              "AGGRESSION",
              -2
            ]
          ]
        },
        "success": {
          "topic": "TALK_MESMER_SUCCESS"
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_FAIL",
    "dynamic_line": "哇！那是什么？我神游了一会儿。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "npc_add_effect": "block_mesmer",
          "duration": 86400
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_SUCCESS",
    "dynamic_line": "太累了…",
    "responses": [
      {
        "text": "从今以后，你将成为我的精神奴隶，永远受我意志的束缚！（每个NPC只能尝试一次）",
        "condition": {
          "not": {
            "npc_has_any_trait": [
              "THRALL",
              "UNTHRALL"
            ]
          }
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 0,
          "mod": [
            [
              "BRAVERY",
              -2
            ],
            [
              "POS_FEAR",
              -1
            ],
            [
              "AGGRESSION",
              -2
            ]
          ]
        },
        "success": {
          "topic": "TALK_DONE",
          "effect": [
            {
              "npc_add_trait": "THRALL"
            },
            {
              "u_add_effect": "thrall_victory",
              "duration": 2
            }
          ],
          "opinion": {
            "trust": 5,
            "fear": 5
          }
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL",
          "effect": [
            {
              "npc_add_trait": "UNTHRALL"
            }
          ],
          "opinion": {
            "trust": -5,
            "fear": 3,
            "anger": 3
          }
        }
      },
      {
        "text": "放下武器。没有必要使用暴力。",
        "condition": "npc_has_weapon",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 50
        },
        "success": {
          "topic": "TALK_DONE",
          "effect": "drop_weapon",
          "opinion": {
            "fear": 3,
            "anger": -3
          }
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL",
          "opinion": {
            "trust": -1,
            "fear": 1,
            "anger": 2
          }
        }
      },
      {
        "text": "我们应该结伴而行。听起来不像个好主意吗？是个好主意。",
        "condition": {
          "not": "npc_following"
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 50
        },
        "success": {
          "topic": "TALK_DONE",
          "effect": "follow",
          "opinion": {
            "trust": 1,
            "fear": 2,
            "anger": -2
          }
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL",
          "opinion": {
            "trust": -1,
            "fear": 2,
            "anger": 1
          }
        }
      },
      {
        "text": "[NPC -愤怒]放下你的敌意，放松。放松。保持平静。",
        "topic": "TALK_DONE",
        "effect": {
          "npc_add_effect": "block_mesmer",
          "duration": 86400
        },
        "opinion": {
          "anger": -15
        }
      },
      {
        "text": "[NPC +信任]你必须更加信任我。信任我。我们是最好的朋友，你和我。朋友。",
        "topic": "TALK_DONE",
        "effect": {
          "npc_add_effect": "block_mesmer",
          "duration": 86400
        },
        "opinion": {
          "value": 1,
          "trust": 10
        }
      },
      {
        "text": "[NPC -恐惧]不要担心你的安全。安全。我们非常安全。",
        "topic": "TALK_DONE",
        "effect": {
          "npc_add_effect": "block_mesmer",
          "duration": 86400
        },
        "opinion": {
          "fear": -10,
          "anger": -10
        }
      },
      {
        "text": "[NPC +睡眠]是的，睡吧。让沉重将你拉入沉睡。睡吧。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_effect": "block_mesmer",
            "duration": 86400
          },
          {
            "npc_add_effect": "sleep",
            "duration": 28800
          },
          {
            "npc_add_effect": "narcosis",
            "duration": 28800
          }
        ]
      },
      {
        "text": "你会忘记这个…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_THRALL",
    "dynamic_line": "遵命。",
    "responses": [
      {
        "text": "清除你自己的软弱和邪恶，仆从！",
        "topic": "TALK_DONE",
        "condition": {
          "npc_has_any_trait": [
            "CHEMIMBALANCE",
            "UNOBSERVANT",
            "SLOWLEARNER",
            "INSOMNIA",
            "DISORGANIZED",
            "FORGETFUL",
            "NARCOLEPTIC",
            "PYROMANIA",
            "CANNIBAL",
            "PSYCHOPATH",
            "KILLER",
            "MASOCHIST",
            "BADTEMPER",
            "ADDICTIVE",
            "SCHIZOPHRENIC",
            "MOODSWINGS",
            "HOARDER"
          ]
        },
        "effect": [
          {
            "npc_add_effect": "hypno_suggest",
            "duration": 86400
          },
          {
            "npc_lose_trait": "CHEMIMBALANCE"
          },
          {
            "npc_lose_trait": "UNOBSERVANT"
          },
          {
            "npc_lose_trait": "SLOWLEARNER"
          },
          {
            "npc_lose_trait": "INSOMNIA"
          },
          {
            "npc_lose_trait": "DISORGANIZED"
          },
          {
            "npc_lose_trait": "FORGETFUL"
          },
          {
            "npc_lose_trait": "NARCOLEPTIC"
          },
          {
            "npc_lose_trait": "PYROMANIA"
          },
          {
            "npc_lose_trait": "CANNIBAL"
          },
          {
            "npc_lose_trait": "PSYCHOPATH"
          },
          {
            "npc_lose_trait": "KILLER"
          },
          {
            "npc_lose_trait": "MASOCHIST"
          },
          {
            "npc_lose_trait": "BADTEMPER"
          },
          {
            "npc_lose_trait": "ADDICTIVE"
          },
          {
            "npc_lose_trait": "SCHIZOPHRENIC"
          },
          {
            "npc_lose_trait": "MOODSWINGS"
          },
          {
            "npc_lose_trait": "HOARDER"
          }
        ]
      },
      {
        "text": "坚定你的思想去面对宇宙的恐怖。前面有许多危险。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_effect": "hypno_suggest",
            "duration": 86400
          },
          {
            "npc_add_effect": "resist_fear",
            "duration": 86400
          },
          {
            "npc_add_effect": "resist_psychic_feedback",
            "duration": 86400
          },
          {
            "npc_add_effect": "resist_psychic_stress",
            "duration": 86400
          }
        ]
      },
      {
        "text": "放开你的痛苦。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_effect": "pkill2",
            "duration": 3600
          }
        ]
      },
      {
        "text": "[NPC +价值] 满足我的心愿。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_effect": "hypno_suggest",
            "duration": 86400
          },
          {
            "npc_lose_effect": "asked_to_follow"
          },
          {
            "npc_lose_effect": "asked_to_train"
          },
          {
            "npc_lose_effect": "asked_for_item"
          }
        ],
        "opinion": {
          "value": 10,
          "anger": -10,
          "trust": 10
        }
      },
      {
        "text": "把你的生命力量借予我，精神奴隶。",
        "topic": "TALK_DONE",
        "condition": {
          "not": {
            "npc_has_effect": "thrall_drain"
          }
        },
        "effect": [
          {
            "npc_add_effect": "hypno_suggest",
            "duration": 86400
          },
          {
            "npc_add_effect": "thrall_drain",
            "duration": 86400
          },
          {
            "u_add_effect": "thrall_boost",
            "duration": 43200
          }
        ],
        "opinion": {
          "value": -2,
          "anger": 3,
          "trust": -5
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_START_DUEL",
    "dynamic_line": "你选错了目标，“朋友”，因为我也被心灵的力量唤醒了。\n准备战斗！",
    "responses": [
      {
        "text": "原谅我的错误！我承认…",
        "topic": "TALK_MESMER_DUEL_CONCEDE"
      },
      {
        "text": "另一个灵能者？那好吧。让决斗开始吧！",
        "topic": "TALK_MESMER_DUEL_0c",
        "effect": [
          {
            "npc_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          },
          {
            "u_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          }
        ]
      },
      {
        "text": "决斗是如何进行的？",
        "topic": "TALK_MESMER_DUEL_RULES"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_RULES",
    "dynamic_line": "心灵决斗是需要多个回合的战斗。\n\n每成功一轮会建立一个'接触'。\n首先建立三个接触的一方胜利。\n你也可以冒险在有少于三次接触的时候尝试偷袭，但这样若是偷袭失败就会立即被击败。",
    "responses": [
      {
        "text": "我明白了……",
        "topic": "TALK_MESMER_START_DUEL"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_0c",
    "dynamic_line": [
      "<mesmer_0c>"
    ],
    "responses": [
      {
        "switch": true,
        "text": "*决斗*[0/3]",
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "2"
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": -20,
          "mod": [
            [
              "ALTRUISM",
              1
            ],
            [
              "AGRESSION",
              -1
            ],
            [
              "ANGER",
              1
            ],
            [
              "BRAVERY",
              2
            ],
            [
              "FEAR",
              -2
            ]
          ]
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_1c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[0/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": -10,
          "mod": [
            [
              "ALTRUISM",
              2
            ],
            [
              "AGRESSION",
              -2
            ],
            [
              "ANGER",
              1
            ],
            [
              "BRAVERY",
              -1
            ],
            [
              "FEAR",
              1
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_1c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[0/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 0,
          "mod": [
            [
              "ALTRUISM",
              -1
            ],
            [
              "AGRESSION",
              2
            ],
            [
              "ANGER",
              2
            ],
            [
              "BRAVERY",
              1
            ],
            [
              "FEAR",
              -3
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "0"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_1c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        }
      },
      {
        "text": "*让步*",
        "condition": {
          "not": {
            "or": [
              {
                "npc_has_var": "psyduel_contact",
                "type": "general",
                "context": "mesmer",
                "value": "1"
              },
              {
                "npc_has_var": "psyduel_contact",
                "type": "general",
                "context": "mesmer",
                "value": "2"
              },
              {
                "npc_has_var": "psyduel_contact",
                "type": "general",
                "context": "mesmer",
                "value": "won"
              }
            ]
          }
        },
        "topic": "TALK_MESMER_DUEL_CONCEDE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_1c",
    "dynamic_line": [
      "<mesmer_1c>"
    ],
    "responses": [
      {
        "switch": true,
        "text": "*决斗*[1/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": -10,
          "mod": [
            [
              "ALTRUISM",
              -2
            ],
            [
              "AGRESSION",
              2
            ],
            [
              "ANGER",
              1
            ],
            [
              "BRAVERY",
              -1
            ],
            [
              "FEAR",
              0
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "2"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_2c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_DEFEAT",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[1/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 0,
          "mod": [
            [
              "ALTRUISM",
              1
            ],
            [
              "AGRESSION",
              -3
            ],
            [
              "ANGER",
              -2
            ],
            [
              "BRAVERY",
              3
            ],
            [
              "FEAR",
              -1
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_2c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[1/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 10,
          "mod": [
            [
              "ALTRUISM",
              1
            ],
            [
              "AGRESSION",
              -1
            ],
            [
              "ANGER",
              2
            ],
            [
              "BRAVERY",
              -2
            ],
            [
              "FEAR",
              2
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "0"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_2c",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        }
      },
      {
        "text": "*最后突击*",
        "trial": {
          "type": "PERSUADE",
          "difficulty": -20
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_VICTORY",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_DEFEAT",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_2c",
    "dynamic_line": [
      "<mesmer_2c>"
    ],
    "responses": [
      {
        "switch": true,
        "text": "*决斗*[2/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 0,
          "mod": [
            [
              "ALTRUISM",
              3
            ],
            [
              "AGRESSION",
              0
            ],
            [
              "ANGER",
              -2
            ],
            [
              "BRAVERY",
              -1
            ],
            [
              "FEAR",
              0
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "2"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_VICTORY",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_DEFEAT",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[2/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 10,
          "mod": [
            [
              "ALTRUISM",
              0
            ],
            [
              "AGRESSION",
              -2
            ],
            [
              "ANGER",
              2
            ],
            [
              "BRAVERY",
              0
            ],
            [
              "FEAR",
              1
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_VICTORY",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            }
          ]
        }
      },
      {
        "switch": true,
        "text": "*决斗*[2/3]",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 20,
          "mod": [
            [
              "NPC_PERSUASION",
              1
            ],
            [
              "AGRESSION",
              3
            ],
            [
              "ANGER",
              3
            ],
            [
              "BRAVERY",
              0
            ],
            [
              "FEAR",
              -4
            ]
          ]
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "0"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_VICTORY",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            }
          ]
        }
      },
      {
        "text": "*最后突击*",
        "trial": {
          "type": "PERSUADE",
          "difficulty": -20
        },
        "condition": {
          "npc_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "success": {
          "topic": "TALK_MESMER_DUEL_VICTORY",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        },
        "failure": {
          "topic": "TALK_MESMER_DUEL_CONTACTED",
          "effect": [
            {
              "u_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "lost"
            },
            {
              "npc_add_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "won"
            }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_CONTACTED",
    "dynamic_line": {
      "npc_has_var": "psyduel_contact",
      "type": "general",
      "context": "mesmer",
      "value": "1",
      "no": "你永远不会打败我的。[2/3]",
      "yes": "哈哈。你的防御正在崩溃。[1/3]"
    },
    "responses": [
      {
        "switch": true,
        "text": "还没结束呢。",
        "condition": {
          "u_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "0"
        },
        "topic": "TALK_MESMER_DUEL_0c"
      },
      {
        "switch": true,
        "text": "你等着吧。",
        "condition": {
          "u_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "1"
        },
        "topic": "TALK_MESMER_DUEL_1c"
      },
      {
        "switch": true,
        "text": "我们走着瞧。",
        "condition": {
          "u_has_var": "psyduel_contact",
          "type": "general",
          "context": "mesmer",
          "value": "2"
        },
        "topic": "TALK_MESMER_DUEL_2c"
      },
      {
        "text": "[+失眠]*永久性吸收对手的睡眠障碍，获得一次接触。",
        "condition": {
          "and": [
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "not": {
                "u_has_trait": "INSOMNIA"
              }
            },
            {
              "npc_has_trait": "INSOMNIA"
            }
          ]
        },
        "effect": [
          {
            "u_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "2"
          },
          {
            "u_add_trait": "INSOMNIA"
          },
          {
            "u_lose_trait": "EASYSLEEPER"
          },
          {
            "u_lose_trait": "EASYSLEEPER2"
          }
        ],
        "topic": "TALK_MESMER_DUEL_2c"
      },
      {
        "text": "[-动物移情]*永久性地牺牲你的移情本性，移除对手的两个联系人。",
        "condition": {
          "and": [
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "u_has_trait": "ANIMALEMPATH"
            }
          ]
        },
        "effect": [
          {
            "npc_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          },
          {
            "u_add_trait": "ANIMALDISCORD"
          },
          {
            "u_lose_trait": "ANIMALEMPATH"
          }
        ],
        "topic": "TALK_MESMER_DUEL_1c"
      },
      {
        "text": "[+SCHIZO+MOODSWINGS]*永久伤害你的精神状态，移除对手的两个联系人。",
        "condition": {
          "and": [
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "0"
            },
            {
              "not": {
                "u_has_trait": "SCHIZOPHRENIC"
              }
            },
            {
              "not": {
                "u_has_trait": "MOODSWINGS"
              }
            }
          ]
        },
        "effect": [
          {
            "npc_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          },
          {
            "u_add_trait": "SCHIZOPHRENIC"
          },
          {
            "u_add_trait": "MOODSWINGS"
          }
        ],
        "topic": "TALK_MESMER_DUEL_0c"
      },
      {
        "text": "[恐怖vs战栗]*利用你的恐怖本性获得一次接触并移除对手的一次。",
        "condition": {
          "and": [
            {
              "not": {
                "u_has_var": "psyduel_bonus_contact",
                "type": "general",
                "context": "mesmer",
                "value": "true"
              }
            },
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "u_has_trait": "TERRIFYING"
            },
            {
              "npc_has_trait": "JITTERY"
            }
          ]
        },
        "effect": [
          {
            "u_add_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer",
            "value": "true"
          },
          {
            "u_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "2"
          },
          {
            "npc_lose_trait": "JITTERY"
          },
          {
            "npc_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          }
        ],
        "topic": "TALK_MESMER_DUEL_2c"
      },
      {
        "text": "利用对手的神经官能症获得一次接触。这会给你心理上的反馈。",
        "condition": {
          "and": [
            {
              "not": {
                "u_has_var": "psyduel_bonus_contact",
                "type": "general",
                "context": "mesmer",
                "value": "true"
              }
            },
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "0"
            },
            {
              "npc_has_trait": "SQUEAMISH"
            },
            {
              "not": {
                "u_has_trait": "SQUEAMISH"
              }
            }
          ]
        },
        "effect": [
          {
            "u_add_effect": "psychic_feedback",
            "duration": 36
          },
          {
            "u_add_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer",
            "value": "true"
          },
          {
            "u_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "1"
          }
        ],
        "topic": "TALK_MESMER_DUEL_1c"
      },
      {
        "text": "[精神]*依靠你的精神移除你对手的一个联系人。这也会从你的潜意识中召唤黑暗存在。",
        "condition": {
          "and": [
            {
              "not": {
                "u_has_var": "psyduel_bonus_contact",
                "type": "general",
                "context": "mesmer",
                "value": "true"
              }
            },
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            },
            {
              "u_has_trait": "SPIRITUAL"
            }
          ]
        },
        "effect": [
          {
            "mapgen_update": "summon_shadows"
          },
          {
            "u_add_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer",
            "value": "true"
          },
          {
            "u_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "1"
          }
        ],
        "topic": "TALK_MESMER_DUEL_1c"
      },
      {
        "text": "[+和平主义者]永久性地摧毁你内心的敌意，移除对手的两个联系人。",
        "condition": {
          "and": [
            {
              "npc_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "2"
            },
            {
              "u_has_var": "psyduel_contact",
              "type": "general",
              "context": "mesmer",
              "value": "1"
            },
            {
              "not": {
                "u_has_any_trait": [
                  "BADTEMPER",
                  "PACIFIST",
                  "KILLER",
                  "PSYCHOPATH"
                ]
              }
            },
            {
              "not": {
                "u_has_flag": "CANNIBAL"
              }
            }
          ]
        },
        "effect": [
          {
            "npc_add_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer",
            "value": "0"
          },
          {
            "u_add_trait": "SCHIZOPHRENIC"
          },
          {
            "u_add_trait": "MOODSWINGS"
          }
        ],
        "topic": "TALK_MESMER_DUEL_1c"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_VICTORY",
    "dynamic_line": "不！打败了？怎么会这样？",
    "speaker_effect": [
      {
        "effect": [
          {
            "u_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_lose_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "npc_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_add_effect": "psychic_duel_victory",
            "duration": 2
          }
        ]
      }
    ],
    "responses": [
      {
        "text": "我已经证明自己是一个优秀的精神论者。没有必要为你不可避免的失败而惩罚你。",
        "topic": "TALK_DONE",
        "opinion": {
          "fear": -10,
          "anger": -10,
          "value": 4,
          "favor": 1
        },
        "effect": [
          {
            "npc_add_var": "psychic_duelist",
            "type": "general",
            "context": "mesmer",
            "value": "yes"
          }
        ]
      },
      {
        "text": "你失败了。现在陷入沉睡。",
        "topic": "TALK_DONE",
        "opinion": {
          "fear": 10,
          "anger": -5,
          "trust": 1
        },
        "effect": [
          {
            "npc_add_effect": "sleep",
            "duration": 28800
          },
          {
            "npc_add_effect": "narcosis",
            "duration": 28800
          }
        ]
      },
      {
        "text": "你太危险了，不能放手。我将粉碎你的思想，封印你的力量。",
        "topic": "TALK_DONE",
        "opinion": {
          "fear": 50,
          "anger": 40,
          "value": -40,
          "trust": -15
        },
        "effect": [
          {
            "npc_add_effect": "sleep",
            "duration": 28800
          },
          {
            "npc_add_effect": "narcosis",
            "duration": 28800
          },
          {
            "npc_add_trait": "LOBOTOMY"
          },
          {
            "npc_lose_trait": "AWAKENED"
          },
          {
            "npc_lose_trait": "MESMER"
          },
          {
            "npc_lose_trait": "PSYCHIC_DEFENSE"
          },
          {
            "npc_lose_trait": "PSYCHIC_STRENGTH"
          },
          {
            "npc_lose_trait": "PSYCHIC_PROJECT"
          }
        ]
      },
      {
        "text": "那些反对我的人…\n…必须死！",
        "topic": "TALK_DONE",
        "effect": "npc_die"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_DEFEAT",
    "dynamic_line": "哈哈！可怜的。你没有机会对抗我高度进化的思想。",
    "speaker_effect": [
      {
        "effect": [
          {
            "u_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_lose_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "npc_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_add_effect": "psychic_duel_defeat",
            "duration": 2
          }
        ]
      }
    ],
    "responses": [
      {
        "switch": true,
        "text": "所以这就是结局…",
        "topic": "TALK_DONE",
        "condition": {
          "npc_has_flag": "CANNIBAL"
        },
        "effect": [
          {
            "u_add_effect": "psychic_death",
            "duration": 77760
          }
        ]
      },
      {
        "switch": true,
        "text": "多么丢脸的失败。",
        "topic": "TALK_DONE",
        "condition": {
          "npc_has_trait": "PACIFIST"
        },
        "effect": [
          {
            "npc_add_effect": "psychic_duelist",
            "duration": 77760
          }
        ]
      },
      {
        "switch": true,
        "text": "仁慈！",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 20,
          "mod": [
            [
              "ALTRUISM",
              3
            ],
            [
              "AGRESSION",
              -2
            ],
            [
              "ANGER",
              -3
            ]
          ]
        },
        "success": {
          "topic": "TALK_DONE",
          "opinion": {
            "fear": -10,
            "value": -20
          },
          "effect": [
            {
              "u_add_effect": "psychic_shackles",
              "duration": 864000
            }
          ]
        },
        "failure": {
          "topic": "TALK_DONE",
          "effect": [
            {
              "u_add_effect": "psychic_shackles",
              "duration": 864000
            },
            {
              "u_add_effect": "madness",
              "duration": "PERMANENT"
            },
            {
              "u_add_trait": "LOBOTOMY"
            },
            {
              "u_lose_trait": "AWAKENED"
            },
            {
              "u_lose_trait": "MESMER"
            },
            {
              "u_lose_trait": "PSYCHIC_DEFENSE"
            },
            {
              "u_lose_trait": "PSYCHIC_STRENGTH"
            },
            {
              "u_lose_trait": "PSYCHIC_PROJECT"
            }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_DUEL_CONCEDE",
    "dynamic_line": "明智的选择。毫无疑问，你脆弱的心灵会被我可怕的力量压垮。",
    "speaker_effect": [
      {
        "effect": [
          {
            "npc_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_lose_var": "psyduel_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_lose_var": "psyduel_bonus_contact",
            "type": "general",
            "context": "mesmer"
          },
          {
            "u_add_effect": "psychic_duel_defeat",
            "duration": 2
          },
          {
            "npc_add_effect": "psychic_duelist",
            "duration": 77760
          }
        ]
      }
    ],
    "responses": [
      {
        "text": "总有一天…",
        "topic": "TALK_DONE",
        "opinion": {
          "fear": -5,
          "value": -5
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TRUE_FOODPERSON",
    "responses": [
      {
        "text": "[催眠]看着我的眼睛，朋友。",
        "condition": {
          "and": [
            {
              "not": "is_by_radio"
            },
            {
              "u_has_trait": "MESMER"
            },
            {
              "not": {
                "npc_has_trait": "THRALL"
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "WILLPOWER",
                  "AWAKENED"
                ]
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "MYCCUS",
                  "MARLOSS",
                  "THRESH_ALPHA",
                  "THRESH_SLIME",
                  "THRESH_CEPHALOPOD"
                ]
              }
            },
            {
              "not": {
                "npc_has_effect": "hypno_suggest"
              }
            },
            {
              "not": {
                "npc_has_effect": "block_mesmer"
              }
            }
          ]
        },
        "topic": "TALK_FOODPERSON_MESMER"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOODPERSON_MESMER",
    "dynamic_line": "对？他们是…呃…很不错的。",
    "responses": [
      {
        "text": "该死的！",
        "effect": [
          {
            "npc_add_trait": "UNTHRALL"
          },
          {
            "npc_add_trait": "WILLPOWER"
          },
          {
            "npc_add_trait": "FEARLESS"
          }
        ],
        "topic": "TALK_TRUE_FOODPERSON"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_GUARD",
    "responses": [
      {
        "text": "[催眠]看着我的眼睛，朋友。",
        "condition": {
          "and": [
            {
              "not": "is_by_radio"
            },
            {
              "u_has_trait": "MESMER"
            },
            {
              "not": {
                "npc_has_trait": "THRALL"
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "WILLPOWER",
                  "AWAKENED"
                ]
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "MYCCUS",
                  "MARLOSS",
                  "THRESH_ALPHA",
                  "THRESH_SLIME",
                  "THRESH_CEPHALOPOD"
                ]
              }
            },
            {
              "not": {
                "npc_has_effect": "hypno_suggest"
              }
            },
            {
              "not": {
                "npc_has_effect": "block_mesmer"
              }
            }
          ]
        },
        "topic": "TALK_MESMER_GUARD_TRIALS"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_GUARD_TRIALS",
    "dynamic_line": "我觉得…困了…突然之间。",
    "responses": [
      {
        "text": "你刚才说了什么？",
        "topic": "TALK_NONE"
      },
      {
        "text": "你的眼睛累了。你的思想笼罩在浓雾中。",
        "switch": true,
        "trial": {
          "type": "PERSUADE",
          "difficulty": 30,
          "mod": [
            [
              "AGGRESSION",
              -2
            ]
          ]
        },
        "success": {
          "topic": "TALK_MESMER_GUARD_SUCCESS"
        },
        "failure": {
          "topic": "TALK_MESMER_FAIL"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_MESMER_GUARD_SUCCESS",
    "dynamic_line": "所以…累了…",
    "responses": [
      {
        "text": "唤醒。忘掉这一切。",
        "topic": "TALK_DONE"
      },
      {
        "text": "是的，睡觉。让沉重把你拉入沉睡。睡吧！",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_effect": "sleep",
            "duration": 28800
          },
          {
            "npc_add_effect": "narcosis",
            "duration": 28800
          }
        ]
      }
    ]
  },
  {
    "id": "TALK_STOLE_ITEM",
    "type": "talk_topic",
    "responses": [
      {
        "text": "[催眠]这里没有东西。你一定看到什么了。",
        "condition": {
          "and": [
            {
              "u_has_trait": "MESMER"
            },
            "u_has_stolen_item",
            {
              "not": {
                "npc_has_any_trait": [
                  "WILLPOWER",
                  "MESMER",
                  "AWAKENED"
                ]
              }
            },
            {
              "not": {
                "npc_has_any_trait": [
                  "MYCCUS",
                  "MARLOSS",
                  "THRESH_ALPHA",
                  "THRESH_SLIME",
                  "THRESH_CEPHALOPOD"
                ]
              }
            },
            {
              "not": {
                "npc_has_effect": "hypno_suggest"
              }
            },
            {
              "not": {
                "npc_has_effect": "block_mesmer"
              }
            }
          ]
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 40,
          "mod": [
            [
              "TRUST",
              4
            ],
            [
              "VALUE",
              0
            ],
            [
              "ANGER",
              -1
            ]
          ]
        },
        "success": {
          "topic": "TALK_MESMER_KEEP_ITEM",
          "effect": {
            "npc_add_effect": "hypno_suggest",
            "duration": 3600
          }
        },
        "failure": {
          "topic": "TALK_DISALLOW_KEEP_ITEM",
          "opinion": {
            "trust": -3,
            "anger": 2
          },
          "effect": {
            "u_faction_rep": -15
          }
        }
      }
    ]
  },
  {
    "id": "TALK_MESMER_KEEP_ITEM",
    "type": "talk_topic",
    "dynamic_line": "我一定看到了什么。",
    "responses": [
      {
        "text": "…",
        "effect": "remove_stolen_status",
        "topic": "TALK_DONE"
      }
    ]
  }
]