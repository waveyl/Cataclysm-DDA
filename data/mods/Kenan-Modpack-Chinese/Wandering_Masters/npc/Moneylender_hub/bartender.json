[
  {
    "type": "npc",
    "id": "NPC_moneylender_bartender",
    "class": "NC_BARTENDER",
    "name_suffix": "酒保",
    "attitude": 0,
    "mission": 3,
    "chat": "TALK_moneylender_bartender1",
    "mission_offered": "MISSION_moneylender_bartender_1",
    "faction": "moneylender_gang"
  },
  {
    "id": "TALK_moneylender_bartender1",
    "type": "talk_topic",
    "dynamic_line": "<greet>，想喝一杯吗？",
    "responses": [
      {
        "text": "关于那个任务……",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": {
          "and": [
            "mission_complete",
            "has_assigned_mission"
          ]
        }
      },
      {
        "text": "这到底是什么地方？",
        "topic": "TALK_moneylender_bartender_info"
      },
      {
        "text": "那么，那些“额外”的员工呢？",
        "topic": "TALK_moneylender_bartender_basement",
        "condition": {
          "and": [
            {
              "not": "has_assigned_mission"
            },
            {
              "not": {
                "npc_has_var": "moneylender_basement",
                "type": "flag",
                "context": "meeting",
                "value": "yes"
              }
            },
            {
              "npc_has_var": "basement",
              "type": "flag",
              "context": "meeting",
              "value": "yes"
            }
          ]
        }
      },
      {
        "text": "让我看看你有什么好货。",
        "topic": "TALK_moneylender_bartender1",
        "effect": "start_trade"
      },
      {
        "text": "我该走了……",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_moneylender_bartender_info",
      "TALK_moneylender_bartender_info_job",
      "TALK_moneylender_bartender_info_place",
      "TALK_moneylender_bartender_info_people",
      "TALK_moneylender_bartender_info_cata",
      "TALK_moneylender_bartender_info_staff"
    ],
    "dynamic_line": "这是一个为迷失的灵魂，谁仍然挣扎在这个艰难的时代生存的地方。",
    "responses": [
      {
        "text": "你在这里是干什么的？",
        "topic": "TALK_moneylender_bartender_info_job"
      },
      {
        "text": "经营这个地方的就你一个人吗？",
        "topic": "TALK_moneylender_bartender_info_place"
      },
      {
        "text": "最近来了很多新面孔？",
        "topic": "TALK_moneylender_bartender_info_people"
      },
      {
        "text": "你是怎么活下来的？",
        "topic": "TALK_moneylender_bartender_info_cata"
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_moneylender_bartender1"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_info_job",
    "dynamic_line": "你知道，普通调酒师的工作就这样：卖酒，做小吃，寻找新面孔，照看我的女孩。老实说，在<the_cataclysm>之后，我没有什么真正的改变。除了那些讨厌的<zombies>，我<swear>讨厌他们。总是成群结队地走来走去，试图在这里闯出大祸。上次他们闯进来的时候，所有的桌子都翻了，所有的窗帘都有条纹！你能相信吗，<name_g>？我告诉你，我<swear>气死了。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_info_place",
    "dynamic_line": "多亏我不是唯一一个在这鬼地方的人。周围这些<name_g>很足够了：一部分是我的员工，另一部分是一些幸存者，来寻求食物、酒、住所，以及能够为你带来这些东西的工作。",
    "responses": [
      {
        "text": "具体是什么员工？我只看到一个女孩在那边。",
        "topic": "TALK_moneylender_bartender_info_staff",
        "condition": {
          "not": {
            "npc_has_var": "basement",
            "type": "flag",
            "context": "meeting",
            "value": "yes"
          }
        },
        "effect": {
          "npc_add_var": "basement",
          "type": "flag",
          "context": "meeting",
          "value": "yes"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_info_staff",
    "dynamic_line": "好吧，也有那个笨蛋…嗯，我可能已经说得太多了。我们换个话题吧。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_info_people",
    "dynamic_line": "通常这里的新人不多。你也看到了，<the_cataclysm>狠狠地毁了我们，没有多少人幸存下来。这真是个悲哀的话题，我们谈点别的吧。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_info_cata",
    "dynamic_line": "嗯，我没什么好说的，真的。我想这纯粹是运气。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_basement",
    "dynamic_line": "这取决于问的人是谁。",
    "responses": [
      {
        "text": "我是警察，所以请让我安静地进去。",
        "topic": "TALK_moneylender_bartender_cop",
        "condition": {
          "u_has_any_trait": [
            "PROF_CYBERCOP",
            "PROF_FED",
            "PROF_PD_DET",
            "PROF_POLICE",
            "PROF_SWAT"
          ]
        }
      },
      {
        "text": "如果你让我进去你会失去什么？",
        "topic": "TALK_moneylender_bartender_talk",
        "condition": {
          "u_has_skill": {
            "skill": "speech",
            "level": 3
          }
        }
      },
      {
        "text": "[女]也许如果我为你做点什么，你会让我进去…",
        "condition": "u_female",
        "trial": {
          "type": "CONDITION",
          "condition": {
            "u_has_any_trait": [
              "PRETTY",
              "BEAUTIFUL",
              "BEAUTIFUL2",
              "BEAUTIFUL3"
            ]
          }
        },
        "success": {
          "topic": "TALK_moneylender_bartender_fem_yes"
        },
        "failure": {
          "topic": "TALK_moneylender_bartender_fem_no"
        }
      },
      {
        "text": "如果我帮你做点什么，你能告诉我更多吗？",
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "下次再说吧。",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_fem_yes",
    "dynamic_line": "我还要几小时才有空。你可以先和我老板谈谈。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "mapgen_update": "ml_door",
          "origin_npc": true
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_fem_no",
    "dynamic_line": "不是我喜欢的类型，抱歉。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_cop",
    "dynamic_line": "你是警察？很好。这个好的<name_g> s会带你去你该去的地方。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          "insult_combat",
          {
            "mapgen_update": "moneylender_bartender_cop",
            "origin_npc": true
          },
          {
            "u_faction_rep": -20
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_talk",
    "dynamic_line": "这是原则问题。你有东西给我吗？",
    "responses": [
      {
        "text": "[35MERCH]也许这会有帮助。",
        "topic": "TALK_moneylender_bartender_talk1",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 35
          }
        },
        "effect": {
          "u_sell_item": "FMCNote",
          "count": 35
        }
      },
      {
        "text": "不行。",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_moneylender_bartender_talk1",
    "dynamic_line": "很好。我要把你的事告诉老板。你可以去楼下见他。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_var": "moneylender_basement",
            "type": "flag",
            "context": "meeting",
            "value": "yes"
          },
          {
            "mapgen_update": "ml_door",
            "origin_npc": true
          },
          {
            "u_faction_rep": 5
          }
        ]
      }
    ]
  },
  {
    "id": "MISSION_moneylender_bartender_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "清理讨厌的流浪汉"
    },
    "description": "酒保让你把讨厌的流浪汉赶走。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 1000,
    "start": {
      "update_mapgen": {
        "om_terrain": "moneylender_hub",
        "place_npcs": [
          {
            "class": "NPC_moneylender_hub_hobo",
            "x": [
              4,
              6
            ],
            "y": [
              9,
              19
            ],
            "target": true
          }
        ]
      }
    },
    "end": {
      "effect": [
        {
          "npc_add_var": "moneylender_basement",
          "type": "flag",
          "context": "meeting",
          "value": "yes"
        },
        {
          "mapgen_update": "ml_door",
          "origin_npc": true
        },
        {
          "u_faction_rep": 5
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "有个讨厌的流浪汉，有时会来这里，把我的大厅当成撞车的地方。他不付钱，出于某种原因，没人愿意替我把他赶出去。如果你这样做，我会看看我能为你做些什么。",
      "accepted": "很好。在那里等他。我肯定他会再来过夜的。",
      "rejected": "哼……",
      "advice": "你需要如何摆脱讨厌的流浪汉的建议吗？",
      "inquire": "搞定了吗？",
      "success": "很好。我要把你的事告诉老板。你可以去楼下见他。",
      "success_lie": "-",
      "failure": "-"
    }
  }
]