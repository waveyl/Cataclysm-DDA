[
  {
    "//": "TODO check text, maybe add more",
    "type": "npc",
    "id": "NPC_Berry_Button",
    "name_unique": "浆果纽扣",
    "gender": "male",
    "name_suffix": "难民",
    "class": "NC_SCAVENGER",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_REFUGEE_Berry_1",
    "faction": "no_faction",
    "mission_offered": "MISSION_BerryButton_1"
  },
  {
    "id": [
      "TALK_REFUGEE_Berry_1"
    ],
    "type": "talk_topic",
    "dynamic_line": "你好，伙计。",
    "responses": [
      {
        "text": "关于那个任务……",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": "has_assigned_mission"
      },
      {
        "text": "我能帮上什么忙吗？",
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "<BGSS_intro_question>",
        "topic": "TALK_Berry_Background"
      },
      {
        "text": "你知道你付给我的是毫无价值的绿皮书，对吧？",
        "effect": {
          "npc_add_var": "u_angry_mis1_rew_Berry",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        "condition": {
          "and": [
            {
              "not": {
                "npc_has_var": "u_angry_mis1_rew_Berry",
                "type": "general",
                "context": "meeting",
                "value": "yes"
              }
            },
            {
              "npc_has_var": "MISSION_BerryButton_1",
              "type": "mission",
              "context": "flag",
              "value": "yes"
            }
          ]
        },
        "topic": "TALK_REFUGEE_Berry_angry1"
      },
      {
        "text": "好的，再见。",
        "topic": "TALK_DONE"
      },
      {
        "text": "你知道，我试过那种私酒。尝起来像地狱！",
        "topic": "BerryB_tried_ub_moonshine",
        "condition": {
          "u_has_effect": "took_ub_mustang"
        }
      }
    ]
  },
  {
    "//": "TODO add background",
    "type": "talk_topic",
    "id": "TALK_Berry_Background",
    "dynamic_line": "我就是个男的。没别的了，仅此而已。",
    "responses": [
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Berry_angry1",
    "dynamic_line": "呵呵？你在说什么？你不认识美元吗？用这些钱能买的酒比你给我的要多得多！",
    "responses": [
      {
        "text": "如果你没有注意到，旧世界已经死了，旧货币现在几乎没有价值。见鬼，我怀疑我能不能找到一个愿意用什么东西来换取这份绿皮书的人。",
        "topic": "TALK_REFUGEE_Berry_angry2"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Berry_angry2",
    "dynamic_line": "哦，这就是为什么那个商人在我向他求婚的时候给了我一个奇怪的眼神…对不起，伙计，我直到现在才想到这个，他。*他笑了，下次，我会给你一些值钱的东西。我向你保证！",
    "responses": [
      {
        "text": "希望如此！",
        "topic": "TALK_DONE"
      },
      {
        "text": "嘿，“朋友”，你不如赶紧拿点值钱的东西来补偿一下我浪费掉的时间？",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 5
        },
        "success": {
          "topic": "TALK_BerryB_Agree"
        },
        "failure": {
          "topic": "TALK_BerryB_Disagree"
        }
      }
    ]
  },
  {
    "//": "TODO change reward",
    "type": "talk_topic",
    "id": "TALK_BerryB_Agree",
    "dynamic_line": "当然，伙计。对不起。如果有用的话，你可以把我的旧戒指给我。",
    "responses": [
      {
        "text": "更像是这样。",
        "topic": "TALK_DONE",
        "effect": {
          "u_spawn_item": "silver_ring"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_BerryB_Disagree",
    "dynamic_line": "嘿，伙计，我说过对不起了！",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "BerryB_tried_ub_moonshine",
    "dynamic_line": "哦，伙计，怎么样？好吗？我知道它很好，那是我一直以来最喜欢的饮料！",
    "responses": [
      {
        "text": "贝瑞，我向上帝发誓，你要是再不停止你的玩笑…",
        "topic": "BerryB_tried_ub_moonshine1",
        "effect": [
          {
            "u_lose_effect": "took_ub_mustang"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "BerryB_tried_ub_moonshine1",
    "dynamic_line": "嗯，你为什么这么生气？你不喜欢吗？也许你喝多了？来，拿着这个，会有帮助的！",
    "responses": [
      {
        "text": "难以置信…",
        "topic": "TALK_DONE",
        "effect": [
          {
            "u_spawn_item": "aspirin",
            "count": 2
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "Berry_wait",
    "dynamic_line": "那么，我弟弟呢？",
    "responses": [
      {
        "text": "他在这儿，活得好好的呢。",
        "topic": "TALK_MISSION_SUCCESS",
        "condition": {
          "and": [
            {
              "not": "mission_complete"
            },
            {
              "u_has_var": "BarryB_safe",
              "type": "general",
              "context": "meeting",
              "value": "yes"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "FMCNote",
            "count": 23
          },
          {
            "npc_first_topic": "TALK_REFUGEE_Berry_1"
          },
          "mission_success"
        ]
      },
      {
        "text": "他还活着，但实在没法保证他毫不受伤。抱歉。",
        "topic": "TALK_MISSION_FAILURE",
        "condition": {
          "and": [
            "mission_complete",
            {
              "u_has_var": "BarryB_met",
              "type": "general",
              "context": "meeting",
              "value": "yes"
            }
          ]
        },
        "effect": [
          {
            "npc_first_topic": "BerryB_sad"
          },
          "mission_failure"
        ]
      },
      {
        "text": "他死了，我无能为力。很抱歉。",
        "topic": "TALK_MISSION_FAILURE",
        "condition": {
          "and": [
            "mission_complete",
            {
              "not": {
                "u_has_var": "BarryB_met",
                "type": "general",
                "context": "meeting",
                "value": "yes"
              }
            }
          ]
        },
        "effect": [
          {
            "npc_first_topic": "BerryB_sad"
          },
          "mission_failure"
        ]
      },
      {
        "text": "没关系的，真的。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "BerryB_sad",
    "dynamic_line": "抱歉，伙计，我现在没心情。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "id": "MISSION_BerryButton_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "给贝瑞带去伏特加"
    },
    "description": "贝瑞想喝点伏特加治喉咙痛。给他拿瓶来。",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 0,
    "item": "vodka",
    "count": 18,
    "value": 500,
    "end": {
      "effect": [
        {
          "u_spawn_item": "money_bundle_twenty",
          "count": 1
        },
        {
          "npc_add_var": "MISSION_BerryButton_1",
          "type": "mission",
          "context": "flag",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_BerryButton_2",
    "dialogue": {
      "describe": "-",
      "offer": "听着，伙计，我得把嗓子咽下去，请给我拿瓶伏特加来。我会付钱给你的。",
      "accepted": "谢谢你，伙计。我就在这儿等你！",
      "rejected": "好吧，那太糟糕了。如果你改变主意就回来。",
      "advice": "试着看看酒吧或者某个孤独的人的房子。",
      "inquire": "你找到伏特加了吗？",
      "success": "呵呵。我相信你，伙计，*贝瑞喝了一大口*，这是我答应你的钱。给他们找个好去处，呵呵。",
      "success_lie": "嘿，伙计，你管这叫伏特加？！",
      "failure": "朋友…"
    }
  },
  {
    "id": "MISSION_BerryButton_2",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "带来好酒"
    },
    "description": "贝瑞让你给他带瓶好酒，叫“本叔叔的野马”。",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 3,
    "item": "uncle_bens_mustang",
    "value": 1000,
    "//": "TODO maybe add Uncle Ben?",
    "start": {
      "assign_mission_target": {
        "om_terrain": "moonshine_still",
        "om_special": "Moonshine Still",
        "om_terrain_replace": "forest",
        "reveal_radius": 1,
        "search_range": 50
      },
      "update_mapgen": {
        "place_item": [
          {
            "item": "uncle_bens_mustang",
            "x": 13,
            "y": 12
          }
        ],
        "place_monster": [
          {
            "monster": "mon_zombie_brute",
            "x": 13,
            "y": 12
          }
        ]
      }
    },
    "end": {
      "effect": [
        {
          "u_spawn_item": "FMCNote",
          "count": 8
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_BerryButton_3",
    "dialogue": {
      "describe": "-",
      "offer": "嘿，伙计，很高兴你还活着。听着，我还有一个任务要做。你听说过“本叔叔的野马”吗？这是全州顶尖的私酿酒！可惜，老本尼现在很有可能已经死了…但是！我这有张有意思的地图，上面记录了树林里所有的密会地点，供酿酒人聚会。我想让你去其中一个地方，发现有酒的话也许可以给我带几瓶……嘿，嘿，别走啊！我会分给你的！好吧，我还会些交易用的钞票，好玩意。怎么说？",
      "accepted": "我就知道你不会拒绝这样的交易，伙计。我就在这里等你！",
      "rejected": "好吧，那太糟糕了。如果你改变主意就回来。",
      "advice": "别在树林里抽烟！",
      "inquire": "你找到了吗？",
      "success": "呵呵。我相信你，伙计，*贝瑞喝了一大口*，这是我答应你的钱。给他们找个好去处，呵呵。",
      "success_lie": "嘿，伙计，别想骗我！",
      "failure": "朋友…"
    }
  },
  {
    "id": "MISSION_BerryButton_3",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "找到贝瑞的哥哥"
    },
    "description": "贝瑞让你去找他哥哥。他说他哥哥被强盗抓住了。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 4000,
    "start": {
      "effect": [
        {
          "npc_first_topic": "Berry_wait"
        }
      ],
      "assign_mission_target": {
        "om_terrain": "cabin",
        "om_special": "Cabin",
        "om_terrain_replace": "forest",
        "reveal_radius": 1,
        "min_distance": 10,
        "search_range": 100
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "NPC_Barry_Button",
            "x": 7,
            "y": 5,
            "target": true
          },
          {
            "class": "bandit",
            "x": 6,
            "y": 14
          },
          {
            "class": "bandit",
            "x": 10,
            "y": 15
          },
          {
            "class": "bandit",
            "x": 13,
            "y": 15
          },
          {
            "class": "bandit",
            "x": 6,
            "y": 16
          },
          {
            "class": "bandit",
            "x": 10,
            "y": 16
          },
          {
            "class": "bandit",
            "x": 13,
            "y": 16
          },
          {
            "class": "bandit",
            "x": 11,
            "y": 21
          },
          {
            "class": "bandit",
            "x": 13,
            "y": 21
          }
        ]
      }
    },
    "end": {
      "effect": [
        {
          "u_spawn_item": "FMCNote",
          "count": 23
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_BerryButton_4",
    "dialogue": {
      "describe": "-",
      "offer": "嘿，伙计，我这里有急事。你以前帮过我，所以我信任你！几天前，我哥哥去森林里见了一些人，他们说会帮忙处理……比如说，那些“工作”。问题是，会面时发生了奇怪的事情。我通过无线电和哥哥通话，但我听到的最后一声是隆隆声和打斗声。我想是他被杀了，伙计…拜托，帮我检查一下会面的地点，如果他还活着，把他带回来见我！",
      "accepted": "谢谢你，伙计。我欠你一大笔钱。请快点！",
      "rejected": "拜托，伙计，帮帮我！",
      "advice": "这家伙可能很危险。我不知道为什么我哥哥想和他们乱搞…",
      "inquire": "你找到他了吗？",
      "success": "哦，上帝，谢谢你，朋友！我很高兴再次见到我弟弟！我永远不会忘记你的帮助！",
      "success_lie": "嘿，伙计，拜托…",
      "failure": "伙计…我会想念我哥哥的…"
    }
  }
]