[
  {
    "type": "npc",
    "id": "NPC_rasta_bob",
    "name_unique": "拉斯塔·鲍勃",
    "gender": "male",
    "class": "NC_rasta_bob",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_rasta_bob_1",
    "faction": "no_faction",
    "mission_offered": "MISSION_rasta_bob_1"
  },
  {
    "type": "npc_class",
    "id": "NC_rasta_bob",
    "name": {
      "str": "Rasta Bob"
    },
    "job_description": "Rasta Bob.",
    "common": false,
    "bonus_str": {
      "rng": [
        1,
        3
      ]
    },
    "bonus_dex": {
      "rng": [
        1,
        5
      ]
    },
    "bonus_int": {
      "rng": [
        1,
        2
      ]
    },
    "bonus_per": {
      "rng": [
        1,
        2
      ]
    },
    "weapon_override": "EMPTY_GROUP",
    "traits": [
      {
        "group": "NPC_starting_traits"
      },
      {
        "group": "Appearance_African"
      },
      {
        "trait": "PAINRESIST"
      }
    ],
    "skills": [
      {
        "skill": "melee",
        "bonus": {
          "rng": [
            4,
            8
          ]
        }
      },
      {
        "skill": "dodge",
        "bonus": {
          "rng": [
            4,
            8
          ]
        }
      },
      {
        "skill": "unarmed",
        "bonus": {
          "rng": [
            4,
            8
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_rasta_bob_1"
    ],
    "dynamic_line": "哟！<greet>",
    "responses": [
      {
        "text": "关于那个任务……",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": "has_assigned_mission"
      },
      {
        "text": "<BGSS_intro_question>",
        "topic": "TALK_rasta_bob_Background"
      },
      {
        "text": "那么，你需要什么，我的兄弟？",
        "topic": "TALK_rasta_bob_truth1",
        "condition": {
          "npc_has_var": "u_helped_rasta_bob",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        }
      },
      {
        "text": "需要帮忙么？",
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_Background",
    "dynamic_line": "哟，我的兄弟。",
    "responses": [
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_truth1",
    "dynamic_line": "我跟你说实话。[*他给你了看看手臂上那个巨大的咬痕*]我想你明白这意味着什么。我也试过处理，但不知为什么，不管我怎么努力，伤痕都不会消失，疼痛也毫不减弱。我会变得跟他们一样的。我不知道该怎么做了…",
    "responses": [
      {
        "text": "哦，我不知道…",
        "topic": "TALK_rasta_bob_truth2"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_truth2",
    "dynamic_line": "旅途很愉快。我们在一起玩得很开心。我只想最后一次玩得开心，而你却在那里帮我。但是现在，我请求你最后一次帮助我…",
    "responses": [
      {
        "text": "当然。我会为你做任何事。",
        "topic": "TALK_rasta_bob_truth3"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_truth3",
    "dynamic_line": "你必须杀了我。只有这样我才能从诅咒中解脱出来，死后也不会变成那种东西。我知道我要求你太多了，但是…",
    "responses": [
      {
        "text": "我…明白…我会帮你…最后一次…",
        "topic": "TALK_rasta_bob_truth4"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_truth4",
    "dynamic_line": "谢谢你，你真的是我的<name_g>。请快点。如果对你来说不难的话，你能把我葬在这个墓地吗？我想和我的父母在这里休息…",
    "responses": [
      {
        "text": "当然，我的<name_g>。再见…这是一次有趣的旅行…",
        "topic": "TALK_rasta_bob_truth5"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_truth5",
    "dynamic_line": "[*他面带微笑平静地死去。有东西从他的口袋里掉了下来",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          {
            "u_spawn_item": "manual_capoeira"
          },
          "npc_die"
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_sleep",
    "dynamic_line": "[*zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz*]",
    "responses": [
      {
        "text": "嘿！！！",
        "topic": "TALK_rasta_bob_1",
        "condition": "u_driving",
        "effect": [
          {
            "npc_add_var": "rasta_bob_car",
            "type": "flag",
            "context": "meeting",
            "value": "yes"
          }
        ]
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_follow",
    "dynamic_line": "我们到了吗，<name_g>？",
    "responses": [
      {
        "text": "是的，<name_g>。我们到了。",
        "topic": "TALK_rasta_bob_sleep",
        "condition": {
          "or": [
            {
              "npc_at_om_location": "motel_twd_1"
            },
            {
              "npc_at_om_location": "motel_twd_2"
            }
          ]
        },
        "effect": [
          {
            "npc_first_topic": "TALK_rasta_bob_dd"
          },
          "stop_following"
        ]
      },
      {
        "text": "是的，<name_g>。我们到了。",
        "topic": "TALK_rasta_bob_1",
        "condition": {
          "and": [
            "mission_complete",
            {
              "u_has_mission": "MISSION_rasta_bob_4"
            }
          ]
        },
        "effect": "stop_following"
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_sleep",
    "dynamic_line": "哟，<name_g>。去和他谈谈。我有点累，所以…[*zzzz*]",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_rasta_bob_dd",
    "dynamic_line": "[*zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz*]",
    "responses": [
      {
        "text": "嘿！",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": "mission_complete",
        "effect": [
          {
            "npc_first_topic": "TALK_rasta_bob_1"
          }
        ]
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "TODO do quest",
    "id": "MISSION_rasta_bob_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "找到大麻叶片"
    },
    "description": "找到大麻叶片",
    "goal": "MGOAL_FIND_ITEM",
    "item": "weed",
    "count": 30,
    "difficulty": 0,
    "value": 1000,
    "end": {
      "effect": [
        {
          "npc_add_effect": "weed_high",
          "duration": "12 days"
        },
        {
          "npc_add_effect": "pkill1",
          "duration": "12 days"
        },
        {
          "npc_add_effect": "pkill2",
          "duration": "12 days"
        },
        {
          "npc_add_effect": "high",
          "duration": "12 days"
        },
        {
          "npc_add_effect": "smoke",
          "duration": "12 days"
        },
        {
          "u_add_effect": "weed_high",
          "duration": "60 minutes"
        },
        {
          "u_add_effect": "pkill1",
          "duration": "60 minutes"
        },
        {
          "u_add_effect": "pkill2",
          "duration": "60 minutes"
        },
        {
          "u_add_effect": "high",
          "duration": "60 minutes"
        },
        {
          "u_add_effect": "smoke",
          "duration": "60 minutes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_rasta_bob_2",
    "dialogue": {
      "describe": "-",
      "offer": "哟<name_g>。我们抽点大麻吧。给我找些，30片叶子就够了。",
      "accepted": "是的，<name_g>。",
      "rejected": "不！",
      "advice": "是的，我们都需要一些建议，<name_g>。",
      "inquire": "<name_g>？",
      "success": "耶，<name_g>，我们抽大麻吧！",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_rasta_bob_2",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "伙计，找到我的车"
    },
    "description": "找到我的车",
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "npc_has_var": "rasta_bob_car",
      "type": "flag",
      "context": "meeting",
      "value": "yes"
    },
    "difficulty": 0,
    "value": 100,
    "start": {
      "assign_mission_target": {
        "om_terrain": "parking_garage_0_0",
        "om_special": "parking_garage",
        "om_terrain_replace": "house",
        "om_terrain_match_type": "PREFIX",
        "reveal_radius": 1,
        "random": true,
        "search_range": 200
      },
      "update_mapgen": {
        "place_vehicles": [
          {
            "vehicle": "hippie_van",
            "x": 29,
            "y": 18,
            "status": 1,
            "rotation": 0
          }
        ]
      },
      "effect": [
        {
          "npc_first_topic": "TALK_rasta_bob_sleep"
        }
      ]
    },
    "end": {
      "effect": [
        {
          "npc_first_topic": "TALK_rasta_bob_1"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_rasta_bob_3",
    "dialogue": {
      "describe": "-",
      "offer": "哟，是你，<name_g>！我的车呢？我找不到。也许你能帮我找到我的车？",
      "accepted": "伙计，谢谢。我在这里会很冷，所以骑到我附近，开车时按喇叭和我说话，否则我就不理你了！",
      "rejected": "不！",
      "advice": "是的，我们都需要一些建议，<name_g>。",
      "inquire": "<name_g>？",
      "success": "嘿，伙计，那真的是我的车？还是不是？我现在太迷糊了，真的说不出来。哦，不管怎样，还是谢谢你。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_rasta_bob_3",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "去找毒贩"
    },
    "description": "去找毒贩",
    "goal": "MGOAL_KILL_MONSTER",
    "difficulty": 0,
    "value": 1000,
    "start": {
      "effect": [
        "follow_only",
        {
          "npc_first_topic": "TALK_rasta_bob_follow"
        }
      ],
      "assign_mission_target": {
        "om_terrain": "motel_twd",
        "om_special": "motel-twd",
        "om_terrain_replace": "field",
        "om_terrain_match_type": "PREFIX",
        "reveal_radius": 1,
        "search_range": 200,
        "min_distance": 25,
        "z": 0
      },
      "update_mapgen": {
        "om_terrain": "motel_twd_second_floor",
        "place_monster": [
          {
            "monster": "mon_zombie",
            "x": 2,
            "y": 4,
            "target": true
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_rasta_bob_4",
    "dialogue": {
      "describe": "-",
      "offer": "哟，<name_g>。我们再弄点大麻吧！我们去查查我的毒贩。他在汽车旅馆那边…",
      "accepted": "是的，那是关于，<name_g>。你开车！我们到那儿的时候跟我说。",
      "rejected": "不！",
      "advice": "是的，我们都需要一些建议，<name_g>。",
      "inquire": "<name_g>？",
      "success": "是的，<very>不错，<name_g>。可惜他变成了丧尸。",
      "success_lie": "WIP-文本",
      "failure": "WIP文本。"
    }
  },
  {
    "id": "MISSION_rasta_bob_4",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "带我去家族墓地"
    },
    "description": "带我去家族墓地",
    "goal": "MGOAL_GO_TO",
    "difficulty": 0,
    "value": 100,
    "start": {
      "effect": [
        "follow_only",
        {
          "npc_first_topic": "TALK_rasta_bob_follow"
        }
      ],
      "assign_mission_target": {
        "om_terrain": "Cemetery_1a",
        "om_special": "cemetery_city",
        "reveal_radius": 1,
        "search_range": 200,
        "min_distance": 25
      }
    },
    "end": {
      "effect": [
        {
          "npc_add_var": "u_helped_rasta_bob",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "帮帮我，兄弟",
      "offer": "带我去墓地，那是我的家人埋葬的地方",
      "accepted": "好。",
      "rejected": "为什么？",
      "advice": "是的，我们都需要一些建议，<name_g>。",
      "inquire": "所以呢？",
      "success": "不错。请和我谈谈。我有事要告诉你。",
      "success_lie": "？？？",
      "failure": "宽松的"
    }
  }
]