[
  {
    "//": "TODO write normal text not this bullshit parody of a writing, maybe add bonus for ?, do class ",
    "type": "npc",
    "id": "NPC_retired_assassin",
    "name_suffix": "刺客",
    "gender": "female",
    "class": "NC_NINJA",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_retired_assassin_1",
    "faction": "no_faction",
    "mission_offered": "MISSION_retired_assassin_1"
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_1",
    "dynamic_line": "<greet>",
    "speaker_effect": {
      "sentinel": "met",
      "effect": {
        "add_mission": "MISSION_retired_assassin_0"
      }
    },
    "responses": [
      {
        "text": "关于那个任务……",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": {
          "and": [
            "mission_complete",
            "has_many_assigned_missions"
          ]
        }
      },
      {
        "text": "<BGSS_intro_question>",
        "topic": "TALK_retired_assassin_Background"
      },
      {
        "text": "需要帮忙么？",
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "你能教我点什么吗？",
        "topic": "TALK_retired_assassin_teach_check"
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_Background",
    "dynamic_line": "我只是个普通的杀手，真的。",
    "responses": [
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_teach_check",
    "dynamic_line": "我只教那些帮助过我的人。你帮过我吗？",
    "responses": [
      {
        "text": "是 啊。",
        "condition": {
          "npc_has_var": "u_helped_retired_assassin",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        "trial": {
          "type": "CONDITION",
          "condition": {
            "npc_has_var": "retired_assassin_teach",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        },
        "success": {
          "effect": [
            {
              "u_spawn_item": "manual_ninjutsu"
            },
            {
              "npc_lose_var": "retired_assassin_teach",
              "type": "general",
              "context": "meeting"
            }
          ],
          "topic": "TALK_retired_assassin_teach"
        },
        "failure": {
          "topic": "TALK_retired_assassin_teach_done"
        }
      },
      {
        "text": "抱歉。",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_teach",
    "dynamic_line": "我所有的知识都来自于此。你现在可以拿走了。祝你好运！",
    "responses": [
      {
        "text": "谢了。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_teach_done",
    "dynamic_line": "我已经把我知道的都教给你了。",
    "responses": [
      {
        "text": "再次感谢老师。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_retired_assassin_wait",
    "dynamic_line": {
      "u_has_var": "retired_assassin_fail",
      "type": "general",
      "context": "meeting",
      "value": "yes",
      "yes": "真可惜…",
      "no": "…"
    },
    "responses": [
      {
        "text": "…",
        "topic": "TALK_MISSION_FAILURE",
        "condition": {
          "u_has_var": "retired_assassin_fail",
          "type": "flag",
          "context": "meeting",
          "value": "yes"
        },
        "effect": [
          "mission_failure",
          "end_conversation"
        ],
        "switch": true
      },
      {
        "text": "我回来了！",
        "topic": "TALK_retired_assassin_1",
        "switch": true
      }
    ]
  },
  {
    "id": "MISSION_retired_assassin_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "黑客"
    },
    "description": "杀了那个书呆子。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 1000,
    "start": {
      "effect": {
        "npc_first_topic": "TALK_retired_assassin_wait"
      },
      "assign_mission_target": {
        "om_terrain": "house",
        "om_terrain_replace": "field",
        "om_terrain_match_type": "PREFIX",
        "z": -1,
        "reveal_radius": 1,
        "search_range": 80,
        "min_distance": 5
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "NPC_ra_target_hacker",
            "x": 22,
            "y": 18,
            "target": true
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_retired_assassin_2",
    "dialogue": {
      "describe": "-",
      "offer": "如你所见，如今正值<the_cataclysm>，街上满是<zombies>。但我还是坚持《刺客守则》，我必须完成我的合同。不如你帮我做些简单的活计？帮我的话，我就教你一些很酷的东西。",
      "accepted": "很好。第一个任务很简单。杀了地下室那个黑客。",
      "rejected": "…",
      "advice": "真的，这工作很简单。别忘了晚上搬家。",
      "inquire": "所以呢？",
      "success": "整洁。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_retired_assassin_2",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "下水道居民"
    },
    "description": "杀死下水道居民。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 1000,
    "start": {
      "assign_mission_target": {
        "om_terrain": "mx_sewer",
        "om_terrain_match_type": "PREFIX",
        "reveal_radius": 1,
        "min_distance": 35,
        "random": true
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "NPC_ra_target_cyborg",
            "x": [
              5,
              20
            ],
            "y": [
              5,
              20
            ],
            "target": true
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_retired_assassin_3",
    "dialogue": {
      "describe": "-",
      "offer": "那是一件容易的事。这可能更难。你还感兴趣吗？",
      "accepted": "很好。我接到了个合同，要干掉住在下水道的<name_b>。雇主是谁，目的为何我一概不知。应该不是很难。",
      "rejected": "…",
      "advice": "但愿你知道要怎么对付鳄鱼。城市下水道里有一大群呢。[*咯咯笑*]",
      "inquire": "所以呢？",
      "success": "整洁。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_retired_assassin_3",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "腐败的警察"
    },
    "description": "杀死腐败的警察。",
    "goal": "MGOAL_KILL_MONSTER",
    "difficulty": 0,
    "value": 100,
    "//2": "TODO redo quest when (?)",
    "start": {
      "assign_mission_target": {
        "om_terrain": "fema_entrance",
        "om_special": "FEMA Camp",
        "om_terrain_replace": "field",
        "om_terrain_match_type": "PREFIX",
        "reveal_radius": 1,
        "random": true,
        "search_range": 200
      },
      "update_mapgen": {
        "place_monster": [
          {
            "monster": "mon_zombie_cop_oat",
            "x": [
              0,
              23
            ],
            "y": [
              0,
              23
            ],
            "target": true
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_retired_assassin_4",
    "dialogue": {
      "describe": "-",
      "offer": "还感兴趣吗？这个可能更难。",
      "accepted": "很好。我接到了个合同，要处理一个贪污的警察。找到他。他有一只手是木头的。据我所知，他被困一处联邦应急管理局营地里。",
      "rejected": "…",
      "advice": "之前联邦应急管理局的营地里挤满了人，现在保准已经挤满了<zombies>。",
      "inquire": "所以呢？",
      "success": "不错。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_retired_assassin_4",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "CEO"
    },
    "description": "杀了CEO。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 100,
    "start": {
      "assign_mission_target": {
        "om_terrain": "loffice_tower_11",
        "om_special": "office_tower_large",
        "om_terrain_replace": "field",
        "search_range": 200
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "NPC_ra_target_ceo",
            "x": 22,
            "y": 18,
            "target": true
          },
          {
            "class": "NPC_ra_target_ceo_bg",
            "x": 23,
            "y": 17
          },
          {
            "class": "NPC_ra_target_ceo_bg",
            "x": 21,
            "y": 17
          }
        ]
      }
    },
    "end": {
      "effect": [
        {
          "npc_add_var": "u_helped_retired_assassin",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        {
          "npc_add_var": "retired_assassin_teach",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "最后一个。会很难的。我希望你确信你能处理好。",
      "accepted": "很好。最后一个任务的目标是某个高层管理人员、CEO还是<swear>鬼知道是什么的家伙。",
      "rejected": "…",
      "advice": "他有专人保护，你要是跟他谈话就有可能被金钱收买。千万记住，不要和你的目标说话！",
      "inquire": "所以呢？",
      "success": "不错。如果你愿意，我现在可以教你。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_retired_assassin_0",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "你见过刺客吗"
    },
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "u_has_var": "-",
      "type": "general",
      "context": "meeting",
      "value": "yes"
    },
    "difficulty": 0,
    "value": 0,
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    },
    "fail": {
      "effect": {
        "u_spawn_item": "oa_head"
      }
    }
  }
]