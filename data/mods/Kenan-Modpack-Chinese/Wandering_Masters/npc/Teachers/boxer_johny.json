[
  {
    "//": "TODO check text, maybe balance him a bit ",
    "type": "npc",
    "id": "NPC_boxer_johnny",
    "name_unique": "拳击手约翰尼",
    "gender": "male",
    "class": "NC_boxer_johnny",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_boxer_johnny_1",
    "faction": "boxer_johnny_gym",
    "mission_offered": "MISSION_boxer_johnny_1"
  },
  {
    "type": "npc_class",
    "id": "NC_boxer_johnny",
    "name": {
      "str": "Boxer Johnny"
    },
    "job_description": "Boxer Johnny.",
    "common": false,
    "bonus_str": {
      "rng": [
        3,
        5
      ]
    },
    "bonus_dex": {
      "rng": [
        2,
        5
      ]
    },
    "bonus_int": {
      "rng": [
        1,
        2
      ]
    },
    "bonus_per": {
      "rng": [
        1,
        2
      ]
    },
    "worn_override": "NC_boxer_johnny_worn",
    "weapon_override": "EMPTY_GROUP",
    "traits": [
      {
        "group": "NPC_starting_traits"
      },
      {
        "group": "Appearance_African"
      },
      {
        "trait": "PAINRESIST"
      },
      {
        "trait": "PROF_BOXER"
      }
    ],
    "skills": [
      {
        "skill": "melee",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      },
      {
        "skill": "dodge",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      },
      {
        "skill": "unarmed",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_boxer_johnny_worn",
    "subtype": "collection",
    "entries": [
      {
        "item": "under_armor_shorts"
      },
      {
        "item": "under_armor"
      },
      {
        "item": "shorts"
      },
      {
        "item": "gloves_wraps"
      },
      {
        "item": "boxing_gloves"
      },
      {
        "item": "headgear"
      },
      {
        "item": "wristwatch"
      },
      {
        "item": "socks"
      },
      {
        "item": "boxer_shorts"
      },
      {
        "item": "boots"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_boxer_johnny_1",
    "dynamic_line": {
      "u_has_var": "bj_debt_repaid",
      "type": "flag",
      "context": "meeting",
      "value": "yes",
      "yes": "好吧，这不是我的救世主吗？欢迎光临！",
      "no": "嘿，我现在没心情！走开！"
    },
    "speaker_effect": {
      "sentinel": "met",
      "effect": {
        "add_mission": "MISSION_boxer_johnny_0"
      }
    },
    "responses": [
      {
        "text": "关于那个任务……",
        "topic": "TALK_MISSION_INQUIRE",
        "condition": {
          "and": [
            "mission_complete",
            "has_many_assigned_missions"
          ]
        }
      },
      {
        "text": "<BGSS_intro_question>",
        "topic": "TALK_boxer_johnny_Background"
      },
      {
        "text": "需要帮忙么？",
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "你能教我点什么吗？",
        "topic": "TALK_boxer_johnny_teach_check"
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_boxer_johnny_Background",
    "dynamic_line": "我只是个普通的拳击手，真的。我在<the_cataclysm>之前在这里工作过，但我想，我现在是住在这里。",
    "responses": [
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_boxer_johnny_teach_check",
    "dynamic_line": "我当然会教你的，但等我把问题全部解决再说。",
    "responses": [
      {
        "text": "那么，问题解决了吗？",
        "condition": {
          "npc_has_var": "u_helped_boxer_johnny",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        "trial": {
          "type": "CONDITION",
          "condition": {
            "npc_has_var": "boxer_johnny_teach",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        },
        "success": {
          "effect": [
            {
              "u_spawn_item": "manual_boxing"
            },
            {
              "npc_lose_var": "boxer_johnny_teach",
              "type": "general",
              "context": "meeting"
            }
          ],
          "topic": "TALK_boxer_johnny_teach"
        },
        "failure": {
          "topic": "TALK_boxer_johnny_teach_done"
        }
      },
      {
        "text": "…",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_boxer_johnny_teach",
    "dynamic_line": "是的，我想是的。给，你可以拿着。",
    "responses": [
      {
        "text": "谢谢，约翰尼。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_boxer_johnny_teach_done",
    "dynamic_line": "我已经把我知道的都教给你了。",
    "responses": [
      {
        "text": "再次感谢你，约翰尼。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "bjohnny_busy",
    "dynamic_line": "*似乎很忙。",
    "responses": [
      {
        "text": "咳咳！",
        "topic": "TALK_boxer_johnny_1",
        "condition": "mission_complete"
      },
      {
        "text": "嗯哼。你的债都还清了，可以休息休息了。",
        "topic": "TALK_MISSION_SUCCESS",
        "condition": {
          "u_has_var": "bj_debt_repaid",
          "type": "flag",
          "context": "meeting",
          "value": "yes"
        },
        "effect": [
          "mission_success",
          {
            "npc_first_topic": "TALK_boxer_johnny_1"
          }
        ]
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "TODO maybe edit something? add unique gang or smthn",
    "id": "MISSION_boxer_johnny_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "保卫约翰尼的健身房"
    },
    "description": "帮助约翰尼保卫他的健身房",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 1000,
    "start": {
      "effect": [
        "follow_only"
      ],
      "assign_mission_target": {
        "om_terrain": "gym"
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "bandit",
            "x": [
              5,
              20
            ],
            "y": [
              5,
              20
            ],
            "target": true
          },
          {
            "class": "thug",
            "x": [
              5,
              20
            ],
            "y": [
              5,
              20
            ],
            "repeat": [
              2,
              4
            ]
          },
          {
            "class": "bandit",
            "x": [
              5,
              20
            ],
            "y": [
              5,
              20
            ],
            "repeat": [
              1,
              3
            ]
          }
        ]
      }
    },
    "end": {
      "effect": "stop_following"
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_boxer_johnny_2",
    "dialogue": {
      "describe": "-",
      "offer": "嗯，你知道，我不知道我该不该告诉你，但是…啊，见鬼，反正我已经几乎是个死人了！在<the_cataclysm>之前，我从放债人那里拿了很多钱来改善我的健身房。一开始，一切都很顺利，但那一天之后，你可以猜到，我的现金流直接变成了零。不知怎的，那个混蛋居然设法活了下来，你能相信吗，他还让我还债！为何？他会给自己买辆好车什么的？！还有更多！当我拒绝付款时，他说他要把我作为奴隶卖给当地的一个匪帮什么的。见鬼，我不会轻易把自己变成奴隶，我要为我的自由而战！你能帮我吗？",
      "accepted": "见鬼，我们要教那些混蛋什么是礼貌…<speech_warning> 我想他们来了！我们去给他们个教训！",
      "rejected": "别这样，伙计！",
      "advice": "像蝴蝶一样动，像蜜蜂一样刺！",
      "inquire": "所以呢？",
      "success": "万岁！就是这样。我们让他们知道了谁才是这里的头儿！谢谢，我欠你一个人情。这会让他冷静一会儿的。",
      "success_lie": "布鲁。",
      "failure": "布鲁。"
    }
  },
  {
    "//": "TODO maybe edit something? add unique gang or smthn",
    "id": "MISSION_boxer_johnny_2",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "约翰尼的债务"
    },
    "description": "帮约翰尼还债",
    "goal": "MGOAL_FIND_ITEM",
    "item": "moneylender_head",
    "difficulty": 0,
    "value": 1000,
    "deadline_low": 31,
    "deadline_high": 31,
    "start": {
      "reveal_om_ter": "moneylender_hub",
      "effect": [
        {
          "npc_first_topic": "bjohnny_busy"
        },
        {
          "u_add_var": "bj_debt",
          "type": "flag",
          "context": "meeting",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_boxer_johnny_3",
    "dialogue": {
      "describe": "-",
      "offer": "能再见到你真是太好了。可惜那个放债的家伙不会那么轻易就放我走的。他最近派了个走狗给我捎了个口信，说如果我想保住我的脑袋和体育馆，我就得帮她做事，那家伙信誓旦旦地说他老板是认真的。现在我有点害怕。要是我能解决这个问题…",
      "accepted": "你想帮我吗？谢谢，我欠你一个大人情！但如果你是认真的，你就没有多少时间了。他只给了一个月，所以如果你或我没有及时赶到…",
      "rejected": "别这样，伙计！",
      "advice": "我敢说他是个<very>危险的人物，所以保重！",
      "inquire": "…",
      "success": "我不知道该说什么。你救了我的命，我永远欠你一条命！非常感谢。",
      "success_lie": "…",
      "failure": "…"
    },
    "fail": {
      "effect": "npc_die"
    }
  },
  {
    "id": "MISSION_boxer_johnny_3",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "给约翰尼招揽学生"
    },
    "description": "为约翰尼的拳击学校招揽学生。",
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "u_has_var": "bj_students",
      "type": "flag",
      "context": "meeting",
      "value": "2"
    },
    "difficulty": 0,
    "value": 1000,
    "start": {
      "effect": [
        {
          "u_add_var": "bj_students",
          "type": "flag",
          "context": "meeting",
          "value": "0"
        },
        {
          "u_add_var": "ally_transfer_bj",
          "type": "flag",
          "context": "transfer",
          "value": "yes"
        }
      ]
    },
    "end": {
      "effect": [
        {
          "npc_add_var": "u_helped_boxer_johnny",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        {
          "npc_add_var": "boxer_johnny_teach",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        {
          "u_lose_var": "ally_transfer_bj",
          "type": "flag",
          "context": "transfer"
        },
        {
          "u_lose_var": "bj_students",
          "type": "flag",
          "context": "meeting"
        }
      ]
    },
    "fail": {
      "effect": [
        {
          "u_lose_var": "ally_transfer_bj",
          "type": "flag",
          "context": "transfer"
        },
        {
          "u_lose_var": "bj_students",
          "type": "flag",
          "context": "meeting"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "所以，现在我的头回来了，我的健身房也回来了！是时候给这个世界一个机会，重新开放我的拳击学校了！给我找两个新同学，让我给他们做一双新的钢拳！有了他们，我们甚至可以清除这个镇上的丧尸！",
      "accepted": "我知道你不会拒绝的，<name_g>。我会等的。",
      "rejected": "别这样，伙计！",
      "advice": "你可以带任何人来。孩子，老人，任何需要保护的人！我们要把这个体育馆改建成我们需要的基地。",
      "inquire": "我会一直在这里等你。",
      "success": "<very>好，<name_g>。如果你愿意，我也可以再给你做一双铁拳！有兴趣的话跟我说。",
      "success_lie": "为什么？",
      "failure": "…"
    }
  },
  {
    "id": "MISSION_boxer_johnny_0",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "见过拳击手约翰尼"
    },
    "goal": "MGOAL_CONDITION",
    "difficulty": 0,
    "value": 0,
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    },
    "fail": {
      "effect": {
        "u_spawn_item": "boxer_johnny_head"
      }
    }
  }
]