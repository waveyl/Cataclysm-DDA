[
  {
    "type": "npc",
    "id": "NPC_bandit_sb_leader",
    "class": "NC_SCAVENGER",
    "name_suffix": "狼群的首领",
    "attitude": 1,
    "mission": 8,
    "gender": "male",
    "chat": "TALK_bandit_sb_leader_start",
    "faction": "sunset_bikers"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_start",
    "dynamic_line": "你在这里干什么？",
    "speaker_effect": {
      "sentinel": "met",
      "effect": {
        "add_mission": "MISSION_bandit_sb_leader_0"
      }
    },
    "responses": [
      {
        "text": "我给你带了个包裹。",
        "topic": "TALK_bandit_sb_leader_package",
        "condition": {
          "u_has_item": "bandit_item_2"
        }
      },
      {
        "text": "只是路过。",
        "topic": "TALK_bandit_sb_leader_done",
        "effect": {
          "u_faction_rep": -5
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_done",
    "dynamic_line": "我受够你了，滚吧",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package",
    "dynamic_line": "包裹？好吧，那就给我。",
    "responses": [
      {
        "text": "干得好。",
        "topic": "TALK_bandit_sb_leader_package_give",
        "effect": {
          "u_consume_item": "bandit_item_2"
        }
      },
      {
        "text": "付款呢？",
        "topic": "TALK_bandit_sb_leader_package_money"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_money",
    "dynamic_line": "付款？我们已经和T先生谈过了。你的事是把包裹给我。",
    "responses": [
      {
        "text": "我哪也不想不付钱就去。",
        "trial": {
          "type": "INTIMIDATE",
          "difficulty": 25
        },
        "success": {
          "topic": "TALK_bandit_sb_leader_package_money_ok"
        },
        "failure": {
          "topic": "TALK_bandit_sb_leader_package_money1"
        }
      },
      {
        "text": "干得好。",
        "topic": "TALK_bandit_sb_leader_package_give",
        "condition": {
          "u_has_item": "bandit_item_2"
        },
        "effect": {
          "u_consume_item": "bandit_item_2"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_give",
    "dynamic_line": "现在出去，我有事要做。",
    "responses": [
      {
        "text": "嘿，我的报酬呢？",
        "topic": "TALK_bandit_sb_leader_package_money1"
      },
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "npc_first_topic": "TALK_bandit_sb_leader_1"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_money1",
    "dynamic_line": "你可能不明白什么，<name_b>。他没有及时给我拿订单，我看没有理由为如此糟糕的邮政服务买单。所以在你惹我生气之前就照我说的做。",
    "speaker_effect": {
      "sentinel": "bikanul",
      "effect": {
        "u_add_var": "bandit_sb_leader_pay",
        "type": "flag",
        "context": "payment",
        "value": "2"
      }
    },
    "responses": [
      {
        "text": "我哪也不想不付钱就去。",
        "topic": "TALK_bandit_sb_leader_package_money2"
      },
      {
        "text": "干得好。",
        "topic": "TALK_bandit_sb_leader_package_give",
        "condition": {
          "u_has_item": "bandit_item_2"
        },
        "effect": {
          "u_consume_item": "bandit_item_2"
        },
        "switch": true
      },
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "npc_first_topic": "TALK_bandit_sb_leader_1"
        },
        "switch": true
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_money2",
    "dynamic_line": "我的人会带你去出口。 <kill_npc_h>, <name_b>!",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "u_faction_rep": -100
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_money_ok",
    "dynamic_line": {
      "npc_has_var": "gamble",
      "type": "flag",
      "context": "temp_var",
      "value": "yes",
      "yes": "嗯，那是一个有趣的游戏。干得好。",
      "no": "好吧，我没时间。现在出去。"
    },
    "speaker_effect": {
      "effect": [
        {
          "npc_lose_var": "gamble",
          "type": "flag",
          "context": "temp_var"
        },
        {
          "u_spawn_item": "ruby",
          "count": 60
        },
        {
          "u_add_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "4"
        }
      ]
    },
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": {
          "npc_first_topic": "TALK_bandit_sb_leader_1"
        }
      }
    ]
  },
  {
    "//": "TODO make ask for money reward after talking to merchant",
    "type": "talk_topic",
    "id": [
      "TALK_bandit_sb_leader_1",
      "TALK_bandit_sb_leader_questions",
      "TALK_bandit_sb_leader_receipt"
    ],
    "dynamic_line": "快点，<name_b>。我没时间听你咕哝。",
    "responses": [
      {
        "text": "关于那个任务……",
        "condition": {
          "and": [
            "has_many_assigned_missions",
            "mission_complete"
          ]
        },
        "topic": "TALK_MISSION_INQUIRE"
      },
      {
        "text": "那包裹的付款呢？",
        "condition": {
          "u_has_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "3"
        },
        "topic": "TALK_bandit_sb_leader_package_money_gamble"
      },
      {
        "text": "那包裹的付款呢？",
        "condition": {
          "u_has_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "1"
        },
        "topic": "TALK_bandit_sb_leader_package_money"
      },
      {
        "text": "我想问你一件事…",
        "topic": "TALK_bandit_sb_leader_questions"
      },
      {
        "text": "我想谈谈农场的劳动力…",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_sb_drugmaker_3"
            },
            {
              "not": {
                "npc_has_var": "gave_receipt",
                "type": "flag",
                "context": "mission_started",
                "value": "yes"
              }
            }
          ]
        },
        "effect": [
          {
            "npc_add_var": "gave_receipt",
            "type": "flag",
            "context": "mission_started",
            "value": "yes"
          },
          {
            "u_spawn_item": "bandit_item_4"
          }
        ],
        "topic": "TALK_bandit_sb_leader_receipt"
      },
      {
        "text": "需要帮忙么？",
        "condition": {
          "not": {
            "u_has_mission": "MISSION_bandit_rs_merchant_2"
          }
        },
        "topic": "TALK_MISSION_LIST"
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "id": "TALK_bandit_sb_leader_questions",
    "type": "talk_topic",
    "dynamic_line": "我没时间说话。<name_b>"
  },
  {
    "//": "TODO change persuade to random roll when available",
    "type": "talk_topic",
    "id": "TALK_bandit_sb_leader_package_money_gamble",
    "dynamic_line": {
      "npc_has_var": "gamble",
      "type": "flag",
      "context": "temp_var",
      "value": "yes",
      "yes": "倒霉，<name_g>。再来一次？",
      "no": "好吧，我们好好干吧。我们玩骰子游戏。我赢了-你付我5块钱。你赢了-你接受付款。你怎么说？"
    },
    "responses": [
      {
        "text": "我们来玩吧。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 5
          }
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 15
        },
        "success": {
          "topic": "TALK_bandit_sb_leader_package_money_ok"
        },
        "failure": {
          "topic": "TALK_bandit_sb_leader_package_money_gamble",
          "effect": [
            {
              "npc_add_var": "gamble",
              "type": "flag",
              "context": "temp_var",
              "value": "yes"
            },
            {
              "u_sell_item": "FMCNote",
              "count": 5
            }
          ]
        }
      },
      {
        "text": "如果你不让步，我就用武力得到我需要的东西。",
        "trial": {
          "type": "INTIMIDATE",
          "difficulty": 5
        },
        "success": {
          "topic": "TALK_bandit_sb_leader_package_money_ok"
        },
        "failure": {
          "topic": "TALK_bandit_sb_leader_package_money2"
        }
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE",
        "effect": {
          "npc_lose_var": "gamble",
          "type": "flag",
          "context": "temp_var"
        }
      }
    ]
  },
  {
    "id": "TALK_bandit_sb_leader_receipt",
    "type": "talk_topic",
    "dynamic_line": "是的，我四处打听了一下，发现了一些值得一试的东西。我和冷酷的姐妹们谈过，他们可以卖给我们一些他们的牛。那些婊子像魔鬼一样讨价还价，我几乎没能穿上裤子离开那里。他故意用双关语。拿着这张收据，给他们的婊子看或者她怎么叫的，她会给你一些他们的牛。别丢了，我是认真的！"
  },
  {
    "id": "MISSION_bandit_sb_leader_gs",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "冷酷的姐妹"
    },
    "description": "见见冷酷姐妹的首领。",
    "goal": "MGOAL_TALK_TO_NPC",
    "difficulty": 0,
    "value": 0,
    "start": {
      "update_mapgen": {
        "om_terrain": "prison_1_gs_4",
        "place_npcs": [
          {
            "class": "NPC_bandit_gs_leader",
            "x": 11,
            "y": 8
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "你见过她吗？",
      "success": "讨厌的婊子，哈？",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_bandit_sb_leader_0",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "你遇到了头儿"
    },
    "description": "这个人还活着。如果这次任务失败，就意味着这个人已经死了。",
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "npc_has_var": "-",
      "type": "-",
      "context": "-",
      "value": "-"
    },
    "difficulty": 0,
    "value": 0,
    "start": {
      "effect": {
        "u_add_var": "bandit_sb_leader",
        "type": "switch",
        "context": "alive_dead",
        "value": "alive"
      }
    },
    "fail": {
      "effect": [
        {
          "u_add_var": "bandit_sb_leader",
          "type": "switch",
          "context": "alive_dead",
          "value": "dead"
        },
        {
          "u_spawn_item": "ruby",
          "count": 60,
          "container": "bag_plastic"
        },
        {
          "u_add_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    }
  }
]