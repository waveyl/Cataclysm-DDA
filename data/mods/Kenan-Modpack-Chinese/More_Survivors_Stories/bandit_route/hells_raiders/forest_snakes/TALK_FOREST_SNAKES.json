[
  {
    "type": "talk_topic",
    "id": [
      "TALK_FOREST_SNAKES",
      "TALK_FOREST_SNAKES_BACKGROUND",
      "TALK_FOREST_SNAKES_WORK_1",
      "TALK_FOREST_SNAKES_WORK_2",
      "TALK_FOREST_SNAKES_WORK_3",
      "TALK_FOREST_SNAKES_WORK_1_DONE",
      "TALK_FOREST_SNAKES_WORK_2_DONE",
      "TALK_FOREST_SNAKES_WORK_3_DONE"
    ],
    "dynamic_line": {
      "npc_has_var": "ally_transfered",
      "type": "flag",
      "context": "transfered",
      "value": "fs",
      "yes": "嘿，<name_g>。森林蛇没问题。这里有很多很酷的人。怎么了？",
      "no": "迷路，<name_b>。"
    },
    "responses": [
      {
        "text": "想帮我突袭那个难民中心吗？",
        "topic": "TALK_FOREST_SNAKES_CHOOSE",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_fs_leader_3"
            },
            {
              "u_compare_var": "leader_lend_bandits",
              "type": "flag",
              "context": "bandits_fs",
              "op": ">",
              "value": 0
            }
          ]
        }
      },
      {
        "truefalsetext": {
          "true": "What have you asked for again?",
          "false": "Wanna help with building the fence?",
          "condition": {
            "npc_has_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        },
        "topic": "TALK_FOREST_SNAKES_WORK_3",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_fs_recruiter_2"
            },
            {
              "u_has_var": "bandit_camp_helpers",
              "type": "count",
              "context": "help_count",
              "value": "2"
            },
            {
              "not": {
                "npc_has_var": "bandit_camp_help",
                "type": "flag",
                "context": "search_for_help",
                "value": "done"
              }
            },
            {
              "or": [
                {
                  "u_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                },
                {
                  "npc_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                }
              ]
            }
          ]
        }
      },
      {
        "truefalsetext": {
          "true": "What have you asked for again?",
          "false": "Wanna help with building the fence?",
          "condition": {
            "npc_has_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        },
        "topic": "TALK_FOREST_SNAKES_WORK_2",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_fs_recruiter_2"
            },
            {
              "u_has_var": "bandit_camp_helpers",
              "type": "count",
              "context": "help_count",
              "value": "1"
            },
            {
              "not": {
                "npc_has_var": "bandit_camp_help",
                "type": "flag",
                "context": "search_for_help",
                "value": "done"
              }
            },
            {
              "or": [
                {
                  "u_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                },
                {
                  "npc_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                }
              ]
            }
          ]
        }
      },
      {
        "truefalsetext": {
          "true": "What have you asked for again?",
          "false": "Wanna help with building the fence?",
          "condition": {
            "npc_has_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        },
        "topic": "TALK_FOREST_SNAKES_WORK_1",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_fs_recruiter_2"
            },
            {
              "u_has_var": "bandit_camp_helpers",
              "type": "count",
              "context": "help_count",
              "value": "0"
            },
            {
              "not": {
                "npc_has_var": "bandit_camp_help",
                "type": "flag",
                "context": "search_for_help",
                "value": "done"
              }
            },
            {
              "or": [
                {
                  "u_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                },
                {
                  "npc_has_var": "bandit_camp_help",
                  "type": "flag",
                  "context": "search_for_help",
                  "value": "yes"
                }
              ]
            }
          ]
        }
      },
      {
        "text": "你是怎么过上强盗生活的？",
        "topic": "TALK_FOREST_SNAKES_BACKGROUND"
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_BACKGROUND",
    "dynamic_line": {
      "npc_has_var": "ally_transfered",
      "type": "flag",
      "context": "transfered",
      "value": "fs",
      "yes": "我不确定我是否能忍受这样的生活。",
      "no": [
        "做些强盗会做的事吧。",
        "我想要杀人。"
      ]
    }
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_CHOOSE",
    "dynamic_line": "当然。我们走吧？",
    "responses": [
      {
        "text": "给我看看你有什么！",
        "topic": "TALK_FOREST_SNAKES_CHOOSE",
        "effect": "reveal_stats"
      },
      {
        "text": "是的，我们走吧。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "set_npc_engagement_rule": "ENGAGE_ALL"
          },
          {
            "toggle_npc_rule": "follow_distance_2"
          },
          "follow_only",
          {
            "add_mission": "MISSION_FOREST_SNAKES_0"
          },
          {
            "u_adjust_var": "leader_lend_bandits",
            "type": "flag",
            "context": "bandits_fs",
            "adjustment": -1
          },
          {
            "npc_first_topic": "TALK_FOREST_SNAKES_FOLLOW"
          }
        ]
      },
      {
        "text": "下次再说吧。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_FOLLOW",
    "dynamic_line": "干什么，老铁？",
    "responses": [
      {
        "text": "[使用]我想让你用这个物品。",
        "topic": "TALK_FOREST_SNAKES_FOLLOW",
        "effect": "npc_gets_item_to_use"
      },
      {
        "text": "不再需要你了。",
        "topic": "TALK_DONE",
        "effect": [
          "leave",
          {
            "npc_first_topic": "TALK_FOREST_SNAKES"
          },
          "mission_success",
          "clear_mission"
        ]
      },
      {
        "text": "<end_talking>",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_1",
    "dynamic_line": {
      "npc_has_var": "bandit_camp_help",
      "type": "flag",
      "context": "search_for_help",
      "value": "yes",
      "yes": "两块烟，我一天都是你的。没有双关语。",
      "no": "<no>, <okay>？我什么也不做，除非我给自己弄点烟。如果你给我拿两块烟，我会考虑的。"
    },
    "speaker_effect": {
      "effect": [
        {
          "npc_add_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help",
          "value": "yes"
        },
        {
          "u_lose_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help"
        }
      ]
    },
    "responses": [
      {
        "text": "这是你的烟。现在开始工作吧 <name_b>。",
        "condition": {
          "u_has_items": {
            "item": "cig",
            "count": 400
          }
        },
        "topic": "TALK_FOREST_SNAKES_WORK_1_DONE",
        "effect": [
          {
            "u_sell_item": "cig",
            "count": 400
          },
          {
            "npc_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "done"
          },
          {
            "u_adjust_var": "bandit_camp_helpers",
            "type": "count",
            "context": "help_count",
            "adjustment": 1
          },
          {
            "u_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_2",
    "dynamic_line": {
      "npc_has_var": "bandit_camp_help",
      "type": "flag",
      "context": "search_for_help",
      "value": "yes",
      "yes": "一副牌，我一天都是你的。没有双关语。",
      "no": "<no>, <okay>？当<name_b>他看到我们在玩的时候，那把我的牌烧了，我不会为他做任何事，除非我给自己买一个新的。如果你给我一副新牌，我会考虑的。"
    },
    "speaker_effect": {
      "effect": [
        {
          "npc_add_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help",
          "value": "yes"
        },
        {
          "u_lose_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help"
        }
      ]
    },
    "responses": [
      {
        "text": "这是你的名片。现在开始工作吧<name_b>。",
        "condition": {
          "u_has_item": "deck_of_cards"
        },
        "topic": "TALK_FOREST_SNAKES_WORK_2_DONE",
        "effect": [
          {
            "u_sell_item": "deck_of_cards"
          },
          {
            "npc_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "done"
          },
          {
            "u_adjust_var": "bandit_camp_helpers",
            "type": "count",
            "context": "help_count",
            "adjustment": 1
          },
          {
            "u_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_3",
    "dynamic_line": {
      "npc_has_var": "bandit_camp_help",
      "type": "flag",
      "context": "search_for_help",
      "value": "yes",
      "yes": "一片胸甲，我就属于你一天。没有双关语。",
      "no": "<no>, <okay>？外面有很多丧尸，我什么也不做，除非我能得到一些保护。我想要一些结实又酷的…嘿，金属盔甲怎么样？我将是无敌的对<zombies>，就像在电影。如果你给我带个金属胸甲，我会考虑的。不需要什么花哨的东西，一个废品就够了。"
    },
    "speaker_effect": {
      "effect": [
        {
          "npc_add_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help",
          "value": "yes"
        },
        {
          "u_lose_var": "bandit_camp_help",
          "type": "flag",
          "context": "search_for_help"
        }
      ]
    },
    "responses": [
      {
        "text": "这是你的胸甲。现在开始工作吧。<name_b>",
        "condition": {
          "u_has_item": "cuirass_scrap"
        },
        "topic": "TALK_FOREST_SNAKES_WORK_3_DONE",
        "effect": [
          {
            "u_sell_item": "cuirass_scrap"
          },
          {
            "npc_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "done"
          },
          {
            "u_adjust_var": "bandit_camp_helpers",
            "type": "count",
            "context": "help_count",
            "adjustment": 1
          },
          {
            "u_add_var": "bandit_camp_help",
            "type": "flag",
            "context": "search_for_help",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_1_DONE",
    "dynamic_line": "酷，酷。我马上去。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_2_DONE",
    "dynamic_line": "嘿，一副漂亮的牌 <name_g>。我马上去。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_FOREST_SNAKES_WORK_3_DONE",
    "dynamic_line": "嘿，漂亮的盔甲 <name_g>。我马上去。"
  },
  {
    "id": "MISSION_FOREST_SNAKES_0",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "护匪"
    },
    "description": "如果你失去了匪首的手下，他会伤害你的。",
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "not": {
        "u_has_mission": "MISSION_bandit_fs_leader_3"
      }
    },
    "difficulty": 0,
    "value": 0,
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    },
    "fail": {
      "effect": {
        "u_adjust_var": "lend_bandits_fs",
        "type": "count",
        "context": "death",
        "adjustment": 1
      }
    }
  }
]