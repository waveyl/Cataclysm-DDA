[
  {
    "//": "TODO make him unique shop stock, maybe make repeated delivery quest (deliver package to other gang leaders)",
    "type": "npc",
    "id": "NPC_bandit_rs_merchant",
    "class": "NC_EVAC_SHOPKEEP",
    "name_unique": "先生",
    "name_suffix": "可疑的商人",
    "gender": "male",
    "attitude": 0,
    "mission": 3,
    "chat": "TALK_bandit_rs_merchant1",
    "faction": "red_suns",
    "mission_offered": "MISSION_bandit_rs_merchant_1"
  },
  {
    "id": [
      "TALK_bandit_rs_merchant1",
      "TALK_bandit_rs_merchant_busy",
      "TALK_bandit_rs_merchant_questions_hh_deal",
      "TALK_bandit_rs_merchant_rare_goods_bought",
      "TALK_bandit_rs_merchant_rare_goods_get",
      "TALK_bandit_rs_merchant_mission2_ask"
    ],
    "type": "talk_topic",
    "dynamic_line": "<greet>",
    "responses": [
      {
        "text": "关于那个任务……",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_bandit_rs_merchant_2"
            },
            "mission_complete"
          ]
        },
        "topic": "TALK_bandit_rs_merchant_mission2",
        "switch": true
      },
      {
        "text": "关于那个任务……",
        "condition": {
          "and": [
            "has_assigned_mission",
            "mission_complete"
          ]
        },
        "topic": "TALK_MISSION_INQUIRE",
        "switch": true
      },
      {
        "text": "需要帮忙么？",
        "trial": {
          "type": "CONDITION",
          "condition": {
            "or": [
              {
                "u_has_var": "hell_hound",
                "type": "switch",
                "context": "alive_dead",
                "value": "dead"
              },
              {
                "not": {
                  "npc_has_var": "busy",
                  "type": "flag",
                  "context": "lock_missions",
                  "value": "yes"
                }
              }
            ]
          }
        },
        "success": {
          "topic": "TALK_MISSION_LIST"
        },
        "failure": {
          "topic": "TALK_bandit_rs_merchant_busy"
        }
      },
      {
        "text": "我想问你一件事…",
        "topic": "TALK_bandit_rs_merchant_questions"
      },
      {
        "text": "让我们交易吧。",
        "effect": "start_trade",
        "topic": "TALK_bandit_rs_merchant1"
      },
      {
        "text": "稀有商品呢？",
        "condition": {
          "npc_has_var": "open_rare_trade",
          "type": "flag",
          "context": "open_orders",
          "value": "yes"
        },
        "trial": {
          "type": "CONDITION",
          "condition": {
            "not": {
              "or": [
                {
                  "npc_has_var": "ordered_rm51",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_rm11b",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_rm103a",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_rm120c",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_rm2000",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_20x66",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                },
                {
                  "npc_has_var": "ordered_8x40",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes"
                }
              ]
            }
          }
        },
        "success": {
          "topic": "TALK_bandit_rs_merchant_rare_goods"
        },
        "failure": {
          "topic": "TALK_bandit_rs_merchant_rare_goods_get"
        }
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "TODO write something",
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_busy",
    "dynamic_line": "啊，我最近有很多工作。我们以后再谈吧。同时，你可以帮我们打扫地下室。"
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_bandit_rs_merchant_questions",
      "TALK_bandit_rs_merchant_Background",
      "TALK_bandit_rs_merchant_questions_faction",
      "TALK_bandit_rs_merchant_questions_faction_hr",
      "TALK_bandit_rs_merchant_questions_bands",
      "TALK_bandit_rs_merchant_questions_hh",
      "TALK_bandit_rs_merchant_questions_merch",
      "TALK_bandit_rs_merchant_questions_leader",
      "TALK_bandit_rs_merchant_questions_rs_scientist"
    ],
    "dynamic_line": "快点。你知道，我没时间闲聊。",
    "responses": [
      {
        "text": "现在谁负责？",
        "topic": "TALK_bandit_rs_merchant_questions_leader",
        "condition": {
          "u_has_var": "hell_hound",
          "type": "switch",
          "context": "alive_dead",
          "value": "dead"
        }
      },
      {
        "text": "我是康斯坦特的。你同意什么了吗？",
        "condition": {
          "u_has_var": "fs_leader_mission_khh",
          "type": "count",
          "context": "unmarked_mission_progress",
          "value": "3"
        },
        "effect": {
          "u_add_var": "fs_leader_mission_khh",
          "type": "count",
          "context": "unmarked_mission_progress",
          "value": "4"
        },
        "topic": "TALK_bandit_rs_merchant_questions_hh_deal"
      },
      {
        "text": "你的人说他们不喜欢他们的新领导。是真的吗？",
        "condition": {
          "u_has_var": "fs_leader_mission_khh",
          "type": "count",
          "context": "unmarked_mission_progress",
          "value": "2"
        },
        "topic": "TALK_bandit_rs_merchant_questions_hh"
      },
      {
        "text": "那位科学家同意帮助我解决“猎犬”问题。在那之后你不会对她做任何事，是吗？",
        "condition": {
          "and": [
            {
              "u_compare_var": "fs_leader_mission_khh",
              "type": "count",
              "context": "unmarked_mission_progress",
              "op": ">=",
              "value": 3
            },
            {
              "u_has_var": "poison_agreed",
              "type": "flag",
              "context": "agreed",
              "value": "yes"
            },
            {
              "u_has_mission": "MISSION_bandit_rs_scientist_0"
            }
          ]
        },
        "topic": "TALK_bandit_rs_merchant_questions_rs_scientist"
      },
      {
        "text": "说说你的故事？",
        "topic": "TALK_bandit_rs_merchant_Background"
      },
      {
        "text": "你们都是谁？",
        "topic": "TALK_bandit_rs_merchant_questions_faction"
      },
      {
        "text": "你为什么使用免费的商业商品？",
        "topic": "TALK_bandit_rs_merchant_questions_merch"
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_bandit_rs_merchant1"
      }
    ]
  },
  {
    "//": "TODO write something",
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_leader",
    "dynamic_line": {
      "and": [
        "Well, I.",
        {
          "npc_has_var": "open_rare_trade",
          "type": "flag",
          "context": "open_orders",
          "value": "yes",
          "no": {
            "u_compare_var": "fs_leader_mission_khh",
            "type": "count",
            "context": "unmarked_mission_progress",
            "op": ">=",
            "value": 3,
            "yes": "  By the way, my guys were recently able to recapture our old weapons depot from <zombies>.  Since you have helped us a lot, I can sell you some of our premium merchandise.  With some delays in delivery, though."
          }
        }
      ]
    },
    "speaker_effect": {
      "sentinel": "opened_r_t",
      "condition": {
        "u_compare_var": "fs_leader_mission_khh",
        "type": "count",
        "context": "unmarked_mission_progress",
        "op": ">=",
        "value": 3
      },
      "effect": {
        "npc_add_var": "open_rare_trade",
        "type": "flag",
        "context": "open_orders",
        "value": "yes"
      }
    }
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_Background",
    "dynamic_line": "听着，<name_g>，尽管我做了和现在一样的事，但生活已经过去了。所以让我们结束这个话题，开始展望未来。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_merch",
    "dynamic_line": "为什么不？这些纸的供应量很大，有很多材料可以用来画新的，他们把它们很好地引入了“新”经济。事实上，我们只是没有一个替代者。我们在易货方面相处得很好，但用这些纸片会更容易些。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_faction",
    "dynamic_line": "我们是为了生存而团结起来的普通走私犯。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_hh",
    "dynamic_line": "谁跟你说了这么多无稽之谈……”他用眼睛环顾四周。他松了一口气，低声说：“是的，这是真的。这个怪物没有给我们任何生命。浪费我们的人力和资源，不断地把我们拖入各种愚蠢的事业。没有他会更好。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_hh_deal",
    "dynamic_line": "我们讨论过这个问题，我们决定，没有这个<name_b>，我们都会更好。如果你想干掉他，就挑拨他打架，我们不会干涉你的。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_questions_rs_scientist",
    "dynamic_line": "饶了我吧，<name_g>，我们为什么要这么做。此外，她对我们的帮助比对那只<swear>猿更大。",
    "speaker_effect": {
      "sentinel": "know_sc",
      "effect": [
        {
          "u_lose_var": "poison_agreed",
          "type": "flag",
          "context": "agreed"
        },
        {
          "u_add_var": "rs_scientist_poison",
          "type": "flag",
          "context": "open_option",
          "value": "yes"
        }
      ]
    }
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_bandit_rs_merchant_rare_goods",
      "TALK_bandit_rs_merchant_rare_goods_return"
    ],
    "dynamic_line": "*在他的书桌里挖了一点，拿出一张纸给你看。”这是我现在能给你的。选择。”",
    "responses": [
      {
        "text": "120令吉。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_rm120c"
      },
      {
        "text": "103A令吉。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_rm103a"
      },
      {
        "text": "11b令吉。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_rm11b"
      },
      {
        "text": "2000令吉。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_rm2000"
      },
      {
        "text": "51令吉。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_rm51"
      },
      {
        "text": "弹药。",
        "topic": "TALK_bandit_rs_merchant_rare_goods_ammo"
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_bandit_rs_merchant1"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_return",
    "dynamic_line": "选择。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_rm120c",
    "dynamic_line": "Rivtech RM120c猎枪，专为狩猎游戏设计。我可以用1360美克的价格给你买这个，再加上一些弹药。请记住，您需要等待交付至少8天。",
    "responses": [
      {
        "text": "这是你的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 1360
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_rm120c",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 1360
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_rm103a",
    "dynamic_line": "Rivtech RMM103A手枪是迄今为止最强大的手枪之一。我可以给你拿这个，再加上一些弹药，940美元。请记住，您需要等待交付至少10天。",
    "responses": [
      {
        "text": "这是你的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 940
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_rm103a",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 940
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_rm11b",
    "dynamic_line": "Rivtech RM11B侦察步枪，用于提供精确的远程攻击。我可以用11640美世的价格给你买这个，再加上一些弹药。请记住，您需要等待交付至少24天。",
    "responses": [
      {
        "text": "这是你的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 11640
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_rm11b",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 11640
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_rm2000",
    "dynamic_line": "Rivtech RM2000冲锋枪。我可以用7700美元给你买这个，再加上一些弹药。请记住，您需要等待交付至少20天。",
    "responses": [
      {
        "text": "这是你的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 7700
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_rm2000",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 7700
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_rm51",
    "dynamic_line": "Rivtech RM51突击步枪，轻而致命。我可以给你拿这个，再加上一些弹药，7300美元。请记住，您需要等待交货至少18天。",
    "responses": [
      {
        "text": "这是你的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 7300
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_rm51",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 7300
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_ammo",
    "dynamic_line": "100 8x40mm弹药用于90 merch或25 20x66mm弹药用于150 merch。请记住，您需要等待交货至少5天。",
    "responses": [
      {
        "text": "这是您的8×40毫米的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 90
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_8x40",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 90
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      },
      {
        "text": "这是你的20x66毫米的钱。",
        "condition": {
          "u_has_items": {
            "item": "FMCNote",
            "count": 150
          }
        },
        "effect": [
          {
            "npc_add_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "time": true
          },
          {
            "npc_add_var": "ordered_20x66",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes"
          },
          {
            "u_sell_item": "FMCNote",
            "count": 150
          }
        ],
        "topic": "TALK_bandit_rs_merchant_rare_goods_bought"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_bandit_rs_merchant_rare_goods_rm120c",
      "TALK_bandit_rs_merchant_rare_goods_rm103a",
      "TALK_bandit_rs_merchant_rare_goods_rm11b",
      "TALK_bandit_rs_merchant_rare_goods_rm2000",
      "TALK_bandit_rs_merchant_rare_goods_rm51",
      "TALK_bandit_rs_merchant_rare_goods_ammo"
    ],
    "responses": [
      {
        "text": "你还有什么？",
        "topic": "TALK_bandit_rs_merchant_rare_goods_return"
      },
      {
        "text": "我们晚点再说吧。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_bought",
    "dynamic_line": "谢谢您的订单。"
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_rare_goods_get",
    "dynamic_line": {
      "npc_has_var": "ordered_rm2000",
      "type": "flag",
      "context": "ordered_weapon",
      "value": "yes",
      "yes": {
        "npc_compare_time_since_var": "ordered",
        "type": "time",
        "context": "wait_order",
        "op": ">",
        "time": "20 days",
        "yes": "这是你的RM2000冲锋枪，和刚出厂一样新。",
        "no": "还在等你的订单。"
      },
      "no": {
        "npc_has_var": "ordered_rm51",
        "type": "flag",
        "context": "ordered_weapon",
        "value": "yes",
        "yes": {
          "npc_compare_time_since_var": "ordered",
          "type": "time",
          "context": "wait_order",
          "op": ">",
          "time": "18 days",
          "yes": "这是你的RM51突击步枪，和刚出厂一样新。",
          "no": "还在等你的订单。"
        },
        "no": {
          "npc_has_var": "ordered_rm11b",
          "type": "flag",
          "context": "ordered_weapon",
          "value": "yes",
          "yes": {
            "npc_compare_time_since_var": "ordered",
            "type": "time",
            "context": "wait_order",
            "op": ">",
            "time": "24 days",
            "yes": "这是您的RM11B，刚出厂的。",
            "no": "还在等你的订单。"
          },
          "no": {
            "npc_has_var": "ordered_rm103a",
            "type": "flag",
            "context": "ordered_weapon",
            "value": "yes",
            "yes": {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "10 days",
              "yes": "这是你的103A令吉，刚出厂。",
              "no": "还在等你的订单。"
            },
            "no": {
              "npc_has_var": "ordered_rm120c",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes",
              "yes": {
                "npc_compare_time_since_var": "ordered",
                "type": "time",
                "context": "wait_order",
                "op": ">",
                "time": "8 days",
                "yes": "这是你的RM120c霰弹枪，和刚出厂一样新。",
                "no": "还在等你的订单。"
              },
              "no": {
                "npc_has_var": "ordered_20x66",
                "type": "flag",
                "context": "ordered_weapon",
                "value": "yes",
                "yes": {
                  "npc_compare_time_since_var": "ordered",
                  "type": "time",
                  "context": "wait_order",
                  "op": ">",
                  "time": "5 days",
                  "yes": "这是你的弹药，和刚出厂一样新。",
                  "no": "还在等你的订单。"
                },
                "no": {
                  "npc_has_var": "ordered_8x40",
                  "type": "flag",
                  "context": "ordered_weapon",
                  "value": "yes",
                  "yes": {
                    "npc_compare_time_since_var": "ordered",
                    "type": "time",
                    "context": "wait_order",
                    "op": ">",
                    "time": "5 days",
                    "yes": "这是你的弹药，和刚出厂一样新。",
                    "no": "还在等你的订单。"
                  }
                }
              }
            }
          }
        }
      }
    },
    "speaker_effect": [
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_rm2000",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "20 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "rm2000_smg"
          },
          {
            "u_spawn_item": "8mm_fmj",
            "count": 50
          },
          {
            "npc_lose_var": "ordered_rm2000",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_rm51",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "18 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "rm51_assault_rifle"
          },
          {
            "u_spawn_item": "8mm_fmj",
            "count": 100
          },
          {
            "npc_lose_var": "ordered_rm51",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_rm11b",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "24 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "rm11b_sniper_rifle"
          },
          {
            "u_spawn_item": "8mm_fmj",
            "count": 20
          },
          {
            "npc_lose_var": "ordered_rm11b",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_rm103a",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "10 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "rm103a_pistol"
          },
          {
            "u_spawn_item": "8mm_fmj",
            "count": 20
          },
          {
            "npc_lose_var": "ordered_rm103a",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_rm120c",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "8 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "rm120c"
          },
          {
            "u_spawn_item": "20x66_shot",
            "count": 10
          },
          {
            "npc_lose_var": "ordered_rm120c",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_20x66",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "5 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "20x66_shot",
            "count": 25
          },
          {
            "npc_lose_var": "ordered_20x66",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      },
      {
        "condition": {
          "and": [
            {
              "npc_has_var": "ordered_8x40",
              "type": "flag",
              "context": "ordered_weapon",
              "value": "yes"
            },
            {
              "npc_compare_time_since_var": "ordered",
              "type": "time",
              "context": "wait_order",
              "op": ">",
              "time": "5 days"
            }
          ]
        },
        "effect": [
          {
            "u_spawn_item": "8mm_fmj",
            "count": 100
          },
          {
            "npc_lose_var": "ordered_8x40",
            "type": "flag",
            "context": "ordered_weapon"
          },
          {
            "npc_lose_var": "ordered",
            "type": "time",
            "context": "wait_order"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_mission2",
    "dynamic_line": "你有付款吗？",
    "responses": [
      {
        "text": "给你。",
        "condition": {
          "and": [
            {
              "u_has_var": "bandit_sb_leader_pay",
              "type": "flag",
              "context": "payment",
              "value": "4"
            },
            {
              "u_has_items": {
                "item": "ruby",
                "count": 60
              }
            }
          ]
        },
        "effect": [
          "mission_success",
          {
            "u_sell_item": "ruby",
            "count": 60
          },
          {
            "u_lose_var": "bandit_sb_leader_pay",
            "type": "flag",
            "context": "payment"
          }
        ],
        "topic": "TALK_MISSION_SUCCESS",
        "switch": true
      },
      {
        "truefalsetext": {
          "true": "He don't want to pay not even want to budge.",
          "false": "What payment?  I thought you discussed that with him.",
          "condition": {
            "u_compare_var": "bandit_sb_leader_pay",
            "type": "flag",
            "context": "payment",
            "op": ">=",
            "value": 2
          }
        },
        "topic": "TALK_bandit_rs_merchant_mission2_ask",
        "switch": true
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_bandit_rs_merchant1"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_bandit_rs_merchant_mission2_ask",
    "dynamic_line": {
      "u_compare_var": "bandit_sb_leader_pay",
      "type": "flag",
      "context": "payment",
      "op": ">=",
      "value": 2,
      "yes": "你什么都没说？<name_b>又无缘无故地制造麻烦。告诉他，如果他不付钱的话，我就炸掉<name_b>的<swear> <shitty>，把他的名字放在里面！",
      "no": "什么？你应该为那个包裹付钱的。把钱还给他收回来，<name_b>。"
    },
    "speaker_effect": [
      {
        "sentinel": "mission2_ask1",
        "condition": {
          "u_compare_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "op": "<",
          "value": 1
        },
        "effect": {
          "u_add_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "1"
        }
      },
      {
        "sentinel": "mission2_ask2",
        "condition": {
          "u_has_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "2"
        },
        "effect": {
          "u_add_var": "bandit_sb_leader_pay",
          "type": "flag",
          "context": "payment",
          "value": "3"
        }
      }
    ]
  },
  {
    "id": "MISSION_bandit_rs_merchant_1",
    "type": "mission_definition",
    "name": {
      "str": "保卫难民中心"
    },
    "description": "击退自由商人对难民中心的攻击。",
    "goal": "MGOAL_ASSASSINATE",
    "difficulty": 0,
    "value": 35000,
    "start": {
      "assign_mission_target": {
        "om_terrain": "evac_center_23"
      },
      "update_mapgen": {
        "rows": [
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "                4       ",
          "                        ",
          "               44       ",
          "               44       ",
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "            4           ",
          "                        ",
          "           44           ",
          "           44           ",
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "                        ",
          "                        "
        ],
        "terrain": {
          " ": "t_null"
        },
        "place_vehicles": [
          {
            "vehicle": "pickup",
            "x": 17,
            "y": 5,
            "rotation": 270,
            "fuel": 350,
            "status": 0,
            "chance": 100
          },
          {
            "vehicle": "pickup",
            "x": 13,
            "y": 14,
            "rotation": 270,
            "fuel": 350,
            "status": 0,
            "chance": 100
          }
        ],
        "place_npcs": [
          {
            "class": "hostile_guard",
            "x": 15,
            "y": 5
          },
          {
            "class": "hostile_guard",
            "x": 13,
            "y": 14,
            "target": true
          }
        ],
        "nested": {
          "4": {
            "chunks": [
              [
                "null",
                35
              ],
              [
                "evac_hostile_guards",
                65
              ]
            ]
          }
        }
      }
    },
    "end": {
      "effect": {
        "npc_add_var": "busy",
        "type": "flag",
        "context": "lock_missions",
        "value": "yes"
      },
      "opinion": {
        "trust": 4,
        "value": 4
      },
      "update_mapgen": {
        "om_terrain": "evac_center_13",
        "place_npcs": [
          {
            "class": "NPC_bandit_rs_bomber",
            "x": 2,
            "y": 15
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_bandit_rs_merchant_2",
    "dialogue": {
      "describe": "-",
      "offer": "听。我需要一个快递员送一个非常重要的包裹。一个条件：不要损坏包装。如果你能做到的话，我会让你付出值得的时间。同意吗？",
      "accepted": "很好。这是给你的包裹，拿去……”突然，中心前门大开，有人飞了进来。喘了口气，他说：\n\n暴徒：“嘿，<name_b>骑着皮卡车，全副武装，在这里移动。有时间的时候把他们召集起来，否则他们会一个接一个地向我们开枪！”\n",
      "rejected": "好吧，我去找其他人。",
      "advice": "没时间咨询了！",
      "inquire": "他们死了？",
      "success": "干得好，<name_g>。现在让这些狗孩子们再在这里戳他们的头！顺便说一下，那个飞来的家伙，是我们当地的拆迁人。和他谈谈，也许他需要帮助把那些地下的<name_b>抽出来。现在我需要想想怎么处理这些乱七八糟的东西…",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "id": "MISSION_bandit_rs_merchant_2",
    "type": "mission_definition",
    "name": {
      "str": "包裹递送"
    },
    "goal": "MGOAL_TALK_TO_NPC",
    "difficulty": 0,
    "value": 10000,
    "start": {
      "assign_mission_target": {
        "om_terrain": "ws_biker_dump_2_2"
      },
      "update_mapgen": {
        "place_npcs": [
          {
            "class": "NPC_bandit_sb_leader",
            "x": 10,
            "y": 5,
            "target": true
          }
        ]
      },
      "effect": [
        {
          "u_spawn_item": "bandit_item_2"
        }
      ]
    },
    "end": {
      "opinion": {
        "trust": 2,
        "value": 2
      },
      "effect": {
        "u_lose_var": "bandit_sb_leader_pay",
        "type": "flag",
        "context": "payment"
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "所以，我还是要送包裹。条件是一样的。",
      "accepted": "很好。拿着包裹走。顺便说一下，他前段时间点的，我不确定他是否还在等。你是个聪明的朋友，对吧？你会找到办法的。",
      "rejected": "好吧，我去找其他人。",
      "advice": "你拿着包裹，不假思索地把它带给收件人。",
      "inquire": "-",
      "success": "最后。我会定期需要发送包，所以如果有兴趣，我可以提供给你更多类似的工作。",
      "success_lie": "-",
      "failure": "-"
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "evac_hostile_guards",
    "object": {
      "mapgensize": [
        1,
        1
      ],
      "place_npcs": [
        {
          "class": "hostile_guard",
          "x": 0,
          "y": 0
        }
      ]
    }
  }
]